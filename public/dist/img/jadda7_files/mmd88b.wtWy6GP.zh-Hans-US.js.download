(this.$WP=this.$WP||[]).push(["mmd88b",(e,t)=>{var a,i,n,r,l,o,d,s,c,u,p,m,g,b,h,f,_,v,P,k,y,C,T,w,A,B,x,N,I,W,S,R,D,O,L,E,M,z,F,U,V,H,G,q,Q,K,j,Y,J,Z,$,X,ee,et,ea,ei,en,er,el,eo,ed,es,ec,eu,ep,em,eg,eb,eh,ef,e_,ev,eP,ek,ey,eC,eT,ew,eA,eB,ex,eN,eI,eW,eS,eR,eD,eO,eL,eE,eM,ez,eF,eU,eV,eH,eG,eq,eQ,eK,ej,eY,eJ,eZ,e$,eX,e0,e4,e2,e1,e3,e6,e5,e9,e8,e7,te,tt,ta,ti,tn,tr,tl,to,td,ts,tc,tu,tp,tm,tg,tb,th,tf,t_,tv,tP,tk,ty,tC,tT,tw,tA,tB,tx,tN,tI,tW,tS,tR,tD,tO,tL,tE,tM,tz,tF,tU,tV,tH,tG,tq,tQ,tK,tj,tY,tJ,tZ,t$,tX,t0,t4,t2,t1,t3,t6,t5,t9,t8,t7,ae,at,aa,ai,an,ar,al,ao,ad,as,ac,au,ap,am,ag,ab,ah,af,a_,av,aP,ak,ay,aC,aT,aw,aA,aB,ax,aN,aI,aW,aS,aR,aD,aO,aL,aE,aM,az,aF,aU,aV,aH,aG,aq={price:"HSInc",amount:"UQVVm K O",inlineAmount:"Cvebg"},aQ=e=>{switch(e){case"xsmall":return"title-05";case"small":return"title-04";default:return"title-03"}},aK=e=>"xsmall"===e?"title-05":"title-03",aj=({isPerGroupPricing:e,isTieredPricing:t,maxTravelersPerUnit:n,price:r,strikeThroughPrice:l,variant:o,wrappedPricing:d=!1})=>{var s=null!=l,c=a(ee,{display:"inline",variant:aK(o),color:s?"strikethroughText":"primaryText",dataAttributes:{"data-automation":s?"commerce_module_visible_price_discounted":"commerce_module_visible_price"},children:r}),u=l&&a(ea,{dataAttributes:{"data-automation":"commerce_module_strikethrough_price"},price:l,variant:aQ(o),textColor:s?"primaryText":"strikethroughText",marginRight:"spacing-02"});return a("div",{className:aq.price,children:a(ee,{variant:"small"===o?"supporting-01":"body-01",children:a(et,{price:i("div",{className:d?aq.amount:aq.inlineAmount,children:[u,c]}),strikeThroughPrice:void 0,isPerGroupPricing:!0===e,isTieredPricing:!0===t,maxTravelersPerUnit:null!==n?n:void 0})})})},aY=({cta:e,isPerGroupPricing:t,price:r,strikethroughPrice:l})=>{var o=null!=l;if(!r)return null;var d=i(n,{children:[a(ea,{price:l?a(ey,{model:l}):null,textColor:o?"primaryText":"strikethroughText",variant:"title-04"}),a(ee,{variant:"title-03",color:o?"strikethroughText":"primaryText",children:a(ey,{model:r})})]}),s=i("div",{className:"f u k Q3 w",children:[a(ee,{variant:"supporting-01",whiteSpace:"nowrap",children:t?a(eC,{id:"fusion_attractions_price_per_group",args:{price:d},messages:"每个团体 {price}"}):a(eC,{id:"fusion_attractions_price_per_adult",args:{price:d},messages:"每名成人 {price}"})}),e]});return i(n,{children:[s,a(ex,{children:a("div",{className:"U",children:s})})]})},aJ={expandedPickerContainer:"ozROR A Q2 w",narrow:"vUptH",separator:"RjOhL"},aZ=({previousDatePicker:e,nextDatePicker:t,paxPicker:i,setDate:n,availableDates:r,priceMap:l,onOpen:o,onClose:d,applyButton:s,priceDescription:c,narrow:u,autoAdvance:p,buttonDatePickerAutomationTag:m,fullWidthDateApplyButton:g,trackingTitle:b})=>{var{singleDate:h,isDefaultDates:f}=eR(),_="TABLET"===Y(),v=eD({offset:-1,currentDate:h,setDate:n,availableDates:r}),P=eD({offset:0,currentDate:h,setDate:n,availableDates:r}),k=eD({offset:1,currentDate:h,setDate:n,availableDates:r}),y=F(()=>({name:"separator",value:null,renderButton:function(){return a("div",{className:aJ.separator})}}),[]),C=eO({date:h,setDate:n,availableDates:r,showFooterDescription:!0,isDefaultDates:f,priceMap:l,variant:"icon",numberOfMonths:u?1:void 0,buttonDataAutomationTag:m,fullWidthApplyButton:g}),T=F(()=>[e,v,P,u?null:k,t,y,C,i].filter(Boolean),[e,v,P,k,t,y,C,i,u]),w=U(()=>Z(aJ.expandedPickerContainer,u&&aJ.narrow),[u]);return a(eS,{autoAdvance:p,pickers:T,renderApplyButton:s,pickerFooter:c,inputFieldVariant:"unstyled",alignEdge:_?"right":"left",onOpen:o,onClose:d,getPickerButtonContainerStyle:w,trackingTitle:b})},a$={minimalPickerContainer:"ZINlY A w",inPickerContainer:"TegBo A w"},aX=({previousDatePicker:e,nextDatePicker:t,paxPicker:i,setDate:n,availableDates:r,priceMap:l,onOpen:o=()=>{},onClose:d,applyButton:s,priceDescription:c,autoAdvance:u,buttonDatePickerAutomationTag:p,fullWidthDateApplyButton:m,trackingTitle:g})=>{var{singleDate:b,isDefaultDates:h}=eR(),f=eO({date:b,setDate:n,availableDates:r,showFooterDescription:!0,isDefaultDates:h,priceMap:l,variant:"text-and-icon",buttonDataAutomationTag:p,showThreeLetterWeekday:!0,fullWidthApplyButton:m}),_=F(()=>[e,f,t,i],[e,f,t,i]),v=U(e=>e?a$.inPickerContainer:a$.minimalPickerContainer,[]);return a(eS,{autoAdvance:u,pickers:_,renderApplyButton:s,pickerFooter:c,inputFieldVariant:"unstyled",alignEdge:"right",onOpen:o,onClose:d,getPickerButtonContainerStyle:v,trackingTitle:g})},a0=({paxPicker:e,setDate:t,availableDates:i,priceMap:n,onOpen:r=()=>{},onComplete:l=()=>{},onClose:o,applyButton:d,priceDescription:s,autoAdvance:c,buttonDatePickerAutomationTag:u,fullWidthDateApplyButton:p,trackingTitle:m})=>{var{singleDate:g,isDefaultDates:b}=eR(),h=eO({date:g,setDate:t,availableDates:i,showFooterDescription:!0,isDefaultDates:b,priceMap:n,variant:"text-and-icon",buttonDataAutomationTag:u,closeOnSelect:!0,showApplyButton:!1,staticCalendarWrapper:!0,fullWidthApplyButton:p}),f=F(()=>[h,e],[h,e]);return a(eS,{autoAdvance:c,onComplete:l,pickers:f,renderApplyButton:d,pickerFooter:s,alignEdge:"right",onOpen:r,onClose:o,trackingTitle:m})},a4=({datePickerConfig:e,setDate:t,setPax:i,resetPax:n,availableDates:r,priceMap:l,priceDescription:o,onOpen:d,onClose:s,applyButton:c,autoAdvance:u,buttonDatePickerAutomationTag:p,buttonPaxPickerAutomationTag:m,fullWidthDateApplyButton:g,fullWidthPaxApplyButton:b,trackingTitle:h})=>{var{pax:f,defaultPax:_}=eL({ageBands:e?.passengerInfo?.ageBands,trackingTitle:h}),{singleDate:v,isDefaultDates:P}=eR(),k=eO({date:v,setDate:t,availableDates:r,isDefaultDates:P,priceMap:l,showFooterDescription:!0,showApplyButton:!1,closeOnSelect:!0,dateFormat:"week_date_long",buttonDataAutomationTag:p,layoutStyle:"paginated",fullWidthApplyButton:g,modalVariant:"inflated",trackingTitle:h}),y=eE({passengerInfo:e?.passengerInfo,currentPax:f,defaultPax:_,setPax:i,onReset:n,showDetailedPax:!0,buttonDataAutomationTag:m,fullWidthApplyButton:b,modalVariant:"inflated",trackingTitle:h}),C=F(()=>[k,y],[k,y]),T=U(()=>"f e Q3 w",[]);return a(eS,{pickers:C,autoAdvance:u,renderApplyButton:c,inputFieldVariant:"unstyled",pickerFooter:o,onOpen:d,onClose:s,renderInputFieldInPicker:!1,getPickerButtonContainerStyle:T,displayPickerTitle:!0,trackingTitle:h})},a2=({datePickerConfig:e,variant:t="compact",autoAdvance:r,onOpen:l=()=>{},onClose:o=()=>{},onComplete:d=()=>{},buttonDatePickerAutomationTag:s,buttonPaxPickerAutomationTag:c,fullWidthPaxApplyButton:u,fullWidthDateApplyButton:p,hideResetButton:m,trackingTitle:g})=>{var{clearTourGrade:b,selectedTourGrade:h}=es(),{pax:f,setPax:_,defaultPax:v}=eL({ageBands:e?.passengerInfo?.ageBands,trackingTitle:g}),{singleDate:P,setSingleDate:k}=eR({trackingTitle:g}),y="MOBILE"===Y(),C=h?.tourGrade?.tourGradeCode?h?.tourGrade?.tourGradeCode.split("~")[0]:void 0,T=e?.priceDescription?i(n,{children:[a(ee,{variant:"supporting-02",children:a(ey,{model:e.priceDescription})}),a(ee,{variant:"supporting-02",marginBottom:"spacing-03",marginTop:"spacing-01",children:a(eC,{id:"attractions_adult_shown_calendar",messages:"日历中显示的成人价格"})})]}):null,w=U((e,t,a=!0)=>{b(),k(e,t,a)},[b,k]),A=U((e,t)=>{b(),_(e,t)},[b,_]),B=F(()=>e?.priceCalendar&&e.priceCalendar.length>0?new Set(e.priceCalendar.map(e=>e?.date).filter(Boolean)):void 0,[e?.priceCalendar]),x=F(()=>{var t=new Map;return e?.priceCalendar&&e.priceCalendar.forEach(e=>{e?.date!=null&&e.price?.text!=null&&t.set(e.date,e.price.text)}),t},[e?.priceCalendar]),N=U(()=>A(v,!0),[v,A]),I=m?void 0:N,W=U(e=>{e.value&&"pax"===e.name&&!eW(e.value,f)&&A(e.value,!0),o(e)},[f,A,o]),S=U(({onClick:e,disabled:t,fullWidthApplyButton:i})=>a($,{fullWidth:i,disabled:t,size:"medium",variant:"commerce",onClick:e,dataAttributes:{"data-automation":"applyDatePaxPickerSelection"},children:a(eC,{id:"attractions_update_search",messages:"更新搜索"})}),[]),R=eM({direction:"backward",setDate:w,currentDate:P,availableDates:B}),D=eM({direction:"forward",setDate:w,currentDate:P,availableDates:B}),O=eE({passengerInfo:e?.passengerInfo,defaultPax:v,currentPax:f,setPax:_,showApplyButton:!y,onReset:I,tourGradeCode:C,buttonDataAutomationTag:c,fullWidthApplyButton:u});return"compact"===t?a(t6,{autoAdvance:r,datePickerConfig:e,setDate:w,setPax:A,onClose:W,availableDates:B,priceMap:x,applyButton:S,priceDescription:T,previousDatePicker:R,nextDatePicker:D,paxPicker:O,buttonDatePickerAutomationTag:s,fullWidthDateApplyButton:p,onOpen:l,trackingTitle:g}):"legacy"===t?a(t5,{onComplete:d,autoAdvance:r,datePickerConfig:e,setDate:w,setPax:A,onClose:W,availableDates:B,priceMap:x,applyButton:S,priceDescription:T,paxPicker:O,buttonDatePickerAutomationTag:s,fullWidthDateApplyButton:p,trackingTitle:g}):"stacked"===t?a(t9,{autoAdvance:r,datePickerConfig:e,setDate:w,setPax:A,resetPax:I,onClose:W,availableDates:B,priceMap:x,applyButton:S,priceDescription:T,buttonDatePickerAutomationTag:s,buttonPaxPickerAutomationTag:c,fullWidthDateApplyButton:p,fullWidthPaxApplyButton:u,trackingTitle:g}):a(t3,{autoAdvance:r,datePickerConfig:e,setDate:w,setPax:A,onClose:W,availableDates:B,priceMap:x,applyButton:S,priceDescription:T,previousDatePicker:R,nextDatePicker:D,paxPicker:O,narrow:"expandedNarrow"===t,buttonDatePickerAutomationTag:s,fullWidthDateApplyButton:p,trackingTitle:g})},a1=({datePickerConfig:e,languageOptions:t,price:n,commerceButton:r})=>{var[l,o]=V(!0),[{isTestWithInline:d},s]=ez(),c=t?.languageOptions&&t.languageOptions.length>1,u=d&&c;return H(()=>{c&&s()},[c,s]),i("div",{children:[a("div",{className:eI({marginBottom:"spacing-04"}),children:n}),i("div",{className:"cZKiV Gx",children:[a(ee,{variant:"title-05",marginBottom:"spacing-03",children:a(eC,{id:"fusion_commerce_select_date_travelers_label",messages:"选择日期和旅行者"})}),a(t8,{datePickerConfig:e,variant:"stacked",buttonPaxPickerAutomationTag:"mw-inline-booking-pax-picker",buttonDatePickerAutomationTag:"mw-inline-booking-date-picker",fullWidthDateApplyButton:!0,fullWidthPaxApplyButton:!0,hideResetButton:!0,autoAdvance:l,onClose:e=>{e?.name==="pax"&&o(!1)},trackingTitle:"inlineBooking_mw"}),u&&a(ec,{model:t,fullWidth:!0,marginTop:"spacing-03"}),a("div",{className:eI({marginTop:"spacing-03"}),children:r})]})]})},a3=({model:e})=>{var{commercePersistentCTA:t,isTieredPricing:r,maxTravelersPerUnit:l,isPerGroupPricing:o,price:d,strikeThroughPrice:s,trackingKey:c,datePicker:u,languageOptions:p}=e,m=eu(u),g=null!=o&&o,b=Y(),h="DESKTOP"===b,f="MOBILE"===b,{setPersistentCommerce:_}=W(),[v,{openModal:P,closeModal:k}]=ei({trackingContext:"checkAvailability",fragment:"SHOW_BOOKING"}),y=U(P,[P]),{text:C}=er({internalLink:t?.link}),T=F(()=>({onClick:y}),[y]),w=G(null);H(()=>{var e="commerce",t=C?a(ey,{model:C}):null,i=a(t1,{cta:a($,{variant:e,...T,children:t}),isPerGroupPricing:g,price:d,strikethroughPrice:s});_({ctaButtonProps:{variant:e,children:t,...T},footerComponent:i,footerFadesIn:!0,isFooterVisible:()=>{var e=w.current?.getBoundingClientRect()?.bottom;return null!=e&&e<0},priceText:d?.text,strikeThroughPrice:s?.text})},[C,T,g,d,_,s,t]);var A=d&&a(t2,{isPerGroupPricing:o,isTieredPricing:r,maxTravelersPerUnit:l,price:a(ey,{model:d}),strikeThroughPrice:s&&a(ey,{model:s}),variant:f?"small":"large"}),B=a($,{variant:"commerce",size:"medium",fullWidth:f,...T,children:a("span",{className:Z("VhRIL"),children:C&&a(ey,{model:C})})});return i("div",{className:Z("QYPrC MK","vzHss"),ref:w,children:[!h&&a(E,{component:M.commerce,status:d&&C&&t?.link?z.ok:z.missing}),f?a(t7,{datePickerConfig:m,languageOptions:p,price:A,commerceButton:B}):i(n,{children:[A,!h&&B]}),t?.link&&v&&a(ep,{onClose:k,initialStep:"TOURGRADES",tourContentInfo:em(t.link),trackingKey:c})]})},a6={SUCCESS:"J0gaAfFntpIJBnYT8QVgJuTx8Y+W4tIZvwBzRrL3MXobFI+20nkKMZjC7vTFXVjIO4PwNTCnLVBijntn3htRqw==",MISSING_AFFILIATE_URL:"J0gaAfFntpIJBnYT8QVgJuTx8Y+W4tIZvwBzRrL3MXobJ2E7jIT89vPEsdhyhdnI/ZrEEFImyQchR9ASlG96w2QAgh7Qdny8KZGllTYZsk4="},a5={container:"f Q2 _Y",icon:"fJuIA f Pb PO Po PB Rb",button:"_S Wb",valueProp:"ofyTK"},a9=({valueProp:e})=>{var t=eQ(),{eventId:i}=e.webLink||{},n=el(),r=U(()=>{i&&n(i)},[i,n]),l=U(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),r())},[r]);return i?a("span",{className:a5.valueProp,children:a("span",{className:eN(a5.button,t),role:"button",onClick:r,onKeyPress:l,tabIndex:0,children:a(ee,{variant:"input-03",color:"secondaryText",elementType:"span",children:a(ey,{model:e.title})})})}):a("span",{className:a5.valueProp,children:a(ey,{model:e.title})})},a8=({valueProps:e,...t})=>e.length?i("div",{className:eN(a5.container,eI(t)),children:[a("div",{className:a5.icon,children:a(eK,{size:12})}),a("div",{children:e.map(e=>a(a9,{valueProp:e},e.identifier))})]}):null,a7=(e,t,r)=>{var{localize:l}=eT(),{trackClick:o}=eY(),d=!eJ(),s=U(()=>{o({clientContext:"bookOnViatorCTA",...r?{trackingTitle:r}:null})},[o,r]);return F(()=>{var r=i(n,{children:[a(eC,{id:"attractions_book_on_viator",messages:"在 Viator 预订"}),a(ej,{size:19})]});if(d||!t||!e)return{commerceButtonClickProps:{href:void 0,loading:!0,"aria-label":l.string("正在载入……","common_loading_ffffe209")},ctaText:r};var o=new URLSearchParams;return o.set("pc",t),o.set("lid",String(e)),{commerceButtonClickProps:{href:`/ExperiencesCommerce?${o.toString()}`,target:"_blank",rel:"nofollow noopener",onClick:s},ctaText:r}},[d,t,e,l,s])},ie=({locationId:e,productCode:t,price:i,strikeThroughPrice:n,isPerGroupPricing:r})=>{var l="MOBILE"===Y(),o=G(null),{setPersistentCommerce:d}=W(),{commerceButtonClickProps:s,ctaText:c}=ai(e,t),{commerceButtonClickProps:u}=ai(e,t,"AttractionsStickyFooter"),{commerceButtonClickProps:p}=ai(e,t,"AttractionsStickyHeader");return H(()=>{var e=i&&a(ey,{model:i}),t=n&&n.text,l=a(t1,{cta:a($,{variant:"commerce",...u,children:c}),isPerGroupPricing:r??!1,price:i,strikethroughPrice:n});d({ctaButtonProps:{variant:"commerce",children:c,...p},footerComponent:l,footerFadesIn:!0,isFooterVisible:()=>{var e=o.current?.getBoundingClientRect()?.bottom;return null!=e&&e<0},priceText:e,strikeThroughPrice:t,trackingHandledExternally:!0})},[c,d,o,i,r,n,u,p]),a($,{variant:"commerce",size:l?"small":"medium",ref:o,...s,children:a("span",{className:"Buofz d",children:c})})},it={priceAndLink:"qnLpI Q3 u K",priceWrapper:"dCubE",linkWrapper:"OcQAR",noCommerce:"uJjog",title:"Dvacx",text:"XjPIT",cta:"WINxr"},ia=({model:e,productCode:t,locationId:i})=>{var{isPerGroupPricing:n,price:r,strikeThroughPrice:l,isTieredPricing:o,maxTravelersPerUnit:d,exploreLink:s,hasPartnerRedirectUrl:c}=e,u=Y(),p="TABLET"===u;return"DESKTOP"!==u&&a(ar,{model:{isPerGroupPricing:n,isTieredPricing:o,maxTravelersPerUnit:d,price:r,strikeThroughPrice:l,locationId:i,productCode:t,exploreLink:s,hasPartnerRedirectUrl:c??!1,showDivider:!p,marginBottom:p?"spacing-04":void 0,wrappedPricing:!p}})},ii=({model:e})=>{var{exploreLink:t,noCommerceMessage:n,unavailableMessage:r}=e,{text:l,url:o}=eo(t),d=G(null),s=eZ().isClickOff?a(eC,{id:"exp_booking_unavailable_message",messages:"此产品不可预订。"}):n&&a(ey,{model:n});return i("div",{className:"Lvark A Q3 Ma Nb MK NC",ref:d,children:[i("div",{children:[r&&a(ee,{variant:"title-04",children:a(ey,{model:r})}),s&&a(ee,{variant:"body-01",marginTop:"spacing-02",children:s})]}),l&&null!=o&&a($,{variant:"primary",size:"medium",href:o,children:a(ey,{model:l})})]})},ir=({model:e})=>{var{keyDetails:t}=e,i=t?.filter(Boolean)??[];return i.length>0&&a(aa,{valueProps:i,marginBottom:"spacing-04"})},il=({identifier:e})=>{switch(e){case"duration":return a(e6,{size:18});case"traveler-requirements":return a(e5,{size:18});case"tour-guide-languages":case"written-guide-languages":case"audio-guide-languages":return a(e8,{size:18});case"mobile-phone":return a(e9,{size:18});case"start-time":return a(e3,{size:18});case"pet-friendly":return a(e7,{size:18});default:return null}},io={cta:"NTBGk _S n Ci",detail:"glBfE Q2 _Y",icon:"kOjzQ",noIcon:"ibSMu",tooltipContainer:"UQVkA o"},id=e=>"tour-guide-languages"===e||"audio-guide-languages"===e||"written-guide-languages"===e,is=({model:e,isLanguageIconHidden:t})=>{var{description:n,identifier:r,tooltip:l}=e,{trackClick:o}=e4({clientContext:"readMoreLanguages"});if(!r)return null;var d=l?a("div",{className:io.tooltipContainer,style:{lineHeight:"16px"},children:a(eX,{model:l,labelVariant:"body-01",display:"inline",fitToContent:"shrink"})}):null,s=(e=>{switch(e){case"tour-guide-languages":return a(eC,{id:"language_option_tour_guide_2_v2",args:{languages:n?.text},messages:"现场指南：{languages}"});case"audio-guide-languages":return a(eC,{id:"language_option_audio_guide_1_v2",args:{languages:n?.text},messages:"语音导览：{languages}"});case"written-guide-languages":return a(eC,{id:"language_option_written_guide_1_v2",args:{tooltip:d,languages:n?.text},messages:"书面指南{tooltip}：{languages}"});default:return null}})(r),c=n?.text&&a(ee,{variant:"body-01",marginRight:"spacing-01",children:a(e0,{initialDivHeight:22,webkitLineClamp:!0,numLinesToShow:1,cta:i("div",{className:io.cta,children:[a(eC,{id:"more_link",messages:"更多"})," "]}),onExpandTriggeredByClick:()=>{o()},children:s})});return a(e2,{scope:{scopeType:"item",itemType:"languageKeydetail",itemId:"languageKeydetail"},children:i("div",{className:io.detail,children:[!t&&a("div",{className:io.icon,children:a(as,{identifier:r})}),a("div",{className:t?io.noIcon:void 0,children:c})]})})},ic=({model:e,isLanguageIconHidden:t})=>{var{description:n,identifier:r,tooltip:l}=e,o="pet-friendly"===r;return id(r)?a(ac,{model:e,isLanguageIconHidden:t}):i("div",{className:"f Q2 _Y",children:[a("div",{className:"CBBDT",children:a(as,{identifier:r})}),i("div",{children:[n&&a(ee,{variant:"body-01",elementType:"span",marginRight:"spacing-01",children:a(e$,{model:n})}),l&&a(eX,{model:l,labelVariant:"body-01",fitToContent:o?"expand":"none",width:o?240:void 0})]})]})},iu={container:"A Q2"},ip=(e,t)=>{if(!t)return!1;switch(t){case"tour-guide-languages":default:return!1;case"audio-guide-languages":return e.some(e=>"tour-guide-languages"===e.identifier);case"written-guide-languages":return e.some(e=>"tour-guide-languages"===e.identifier||"audio-guide-languages"===e.identifier)}},im=({model:e})=>{var{keyDetails:t}=e,r=t?.filter(Boolean)??[];return r.length>0&&i(n,{children:[a(eV,{marginBottom:"spacing-04"}),a("div",{className:iu.container,children:r.map(e=>a(au,{model:e,isLanguageIconHidden:ip(r,e.identifier)},e.identifier))}),a(eV,{marginTop:"spacing-04"})]})},ig={container:"_R",bullets:"lwUUi",highlight:"Ptvsb"},ib=({model:e})=>{var{title:t,highlights:n}=e,{sectionRefMapping:r,scrollToSection:l}=S(),o=r.get("WebPresentation_AttractionProductItineraryPlaceholder"),d=U(()=>l(o),[l,o]);return i("div",{className:ig.container,children:[t&&a(ee,{variant:"title-05",marginY:"spacing-03",children:a(ey,{model:t})}),a(ee,{variant:"body-01",elementType:"div",children:i("ul",{className:ig.bullets,children:[n?.filter(Boolean).map(e=>a("li",{className:ig.highlight,children:a(ey,{model:e})},e.text)),o&&a("li",{className:ig.highlight,children:a(X,{onClick:d,children:a(eC,{id:"attractions_see_itinerary",messages:"查看行程"})})})]})})]})},ih=({model:e})=>{var{awards:t}=e;return a("div",{className:eI({marginY:"spacing-03"}),children:null!=t&&t.length>0&&t?.map((e,t)=>e&&a(o,{model:e},t))})},i_=({contents:e})=>a("div",{children:e.map((e,t)=>a(d,{model:e},t))}),iv=({item:e})=>{let t;var[i,n]=V(!1),{trackClick:r}=eY(),{sectionRefMapping:l}=S(),o=l.get(s(e));R(o,(e,t,a)=>{n(!0),e(a)});var d=te()?.isTextAvailable??!1,{faqs:c}=ts({itemType:"PRODUCT",limit:4}),u=!(null==c||0===c.length),p=e.content?.filter(Boolean).filter(e=>"WebPresentation_WhatToExpectSubsection"!==e.__typename||d).filter(e=>"WebPresentation_FaqSubsection"!==e.__typename||u);return null==p||0===p.length?null:a(to,{ref:o,question:a(ey,{model:e.title}),answer:a(i_,{contents:p}),onExpandCollapseClick:(t=e.trackingKey,e=>{n(e=>!e),r({clientContext:e?"accordionClose":"accordionOpen",clientParameter:t})}),isExpanded:i})},iP=({model:e})=>{var{items:t}=e,[r,{openModal:l,closeModal:o}]=en("freeCancellationDetails");ed("CANCELLATION_POLICY_OPEN_OVERLAY",l);var s=t?.filter(Boolean).find(e=>"accordionCancellationPolicy"===e.trackingKey);return i(n,{children:[a(tl,{children:t?.filter(Boolean).map(e=>a(iv,{item:e},e.trackingKey))}),r&&s&&a(td,{variant:"variable-height",widthOption:"fixed-60",title:s.title&&a(ey,{model:s.title}),onClose:o,children:s.content?.filter(Boolean).map((e,t)=>a(d,{model:e},t))})]})},ik=()=>{var{productText:e,productTextIsVUC:t}=tt()??{};return a(tc,{productText:e,productTextIsVUC:t,marginTop:"spacing-04"})},iy=()=>i("div",{className:"DruqB MK",children:[a("div",{className:"ljQea k w",children:a("div",{className:"eiUTr",children:a(ee,{variant:"title-05",children:a(eC,{id:"phoenix_poi_about_title",messages:"相关信息"})})})}),a(ah,{})]}),iC=({info:e})=>a(iT,{model:e,children:a(af,{model:e})}),iT=({model:e,children:t})=>{var{sectionRefMapping:i}=S(),n=e.__typename;return a(v,{id:P(n),ref:i.get(s(e)),dataAttributes:{"data-automation":n},fullWidth:!0,collapsedPadding:!0,children:t})},iw=({primaryList:e,isInlineBooking:t,container:n})=>{var[r]=c(e),l=Y(),o=r("PRODUCT_INFO"),d=r("PRODUCT_COMMERCE"),s=r("PRODUCT_NO_COMMERCE"),v=r("PRODUCT_KEY_DETAILS"),P=r("PRODUCT_HIGHLIGHTS"),k=r("PRODUCT_AWARDS"),y=r("PRODUCT_ACCORDION"),C=r("PRODUCT_VALUE_PROP"),T=!1;u(d)?T=d.isExperiencesPaidTraffic??!1:p(s)&&(T=s.isExperiencesPaidTraffic??!1);var{bucket:w,isClickOff:A,isEligible:B,recordImpression:x}=eZ(T),{fullProduct:N}=ta(),I=N?.productCode??null,{params:W}=J(),S=("detailId"in W?W.detailId:0)??0;return H(()=>{w&&B&&x()},[w,B,x]),i("div",{className:"IsYTu A",children:[m(o)&&a(iC,{info:o,container:n}),!A&&u(d)&&a(iT,{model:d,children:a(ae,{model:d})}),A&&u(d)&&a(iT,{model:d,children:a(al,{model:d,productCode:I,locationId:S})}),p(s)&&!t&&a(iT,{model:s,children:a(ao,{model:s})}),(!A||"DESKTOP"!==l)&&g(C)&&a(iT,{model:C,children:a(ad,{model:C})}),b(v)&&a(iT,{model:v,children:a(ap,{model:v})}),h(P)&&a(iT,{model:P,children:a(am,{model:P})}),f(k)&&a(iT,{model:k,children:a(ag,{model:k})}),_(y)&&a(iT,{model:y,children:a(ab,{model:y})})]})},iA=({model:e,container:t})=>{var{hero:n,primaryList:r}=e,{sectionRefMapping:l}=S(),o=l.get(e.__typename),d=r?.filter(Boolean)||[];return a(v,{id:P(e.__typename),ref:o,dataAttributes:{"data-automation":e.__typename},collapsedPadding:!0,children:i("div",{className:"QynDH",children:[a("div",{className:"JlKmO A",children:a(L,{component:M.mediaviewer,children:n&&a(O,{model:n,sticky:!0})})}),a(a_,{primaryList:d,container:t})]})})},iB=({model:e})=>{var t=ew(),i=tv(t)?"title-04":"expressive-display-07";return"WebPresentation_ImageBackgroundCard"===e.__typename?a(t_,{model:e,textVariant:i}):a(l,{typename:e.__typename})},ix=({model:e})=>{var{content:t,seeAllV2:i,sponsoredBy:n,subtitle:r,narrowCardsCarouselTitle:l,trackingTitle:o}=e,{trackClick:d}=eY(),{url:s,text:c,trackingContext:u}=er({internalLink:i});return a(tf,{title:l&&a(ey,{model:l}),subtitle:r&&a(ey,{model:r}),sponsor:n&&a(ey,{model:n}),link:{title:c?a(ey,{model:c}):null,href:s,onClick:()=>{d({clientContext:u})}},children:a(th,{size:"narrow",onEachScrollEnd:e=>{d({clientContext:"scrollShelfCarousel",clientParameter:JSON.stringify({trackingTitle:o,scrollDirection:e})})},children:t&&t.filter(Boolean).map((e,t)=>e&&e.title?.text!==null&&a(aP,{model:e},t)).filter(Boolean)})})};function iN(){var e=ti(),t=tn();return e||t?a(eq,{children:a(Q,{children:a(ay,{productItinerary:e,mdtProductItinerary:t})})}):null}var iI="fZIel",iW=({model:e})=>{var{sectionTitle:t,sectionDescription:n,improveThisListingRoute:r}=e,l="MOBILE"===Y(),o=r?eo(r):null,{trackClick:d}=eY({clientContext:o?.trackingContext}),s=U(()=>{d()},[d]),{params:c,page:u}=J(),p="detailId"in c&&c.detailId?c.detailId:void 0,m="geoId"in c&&c.geoId?c.geoId:void 0;return i("div",{className:"nWuhW",children:[i("div",{className:iI,children:[t&&a(ee,{variant:"title-05",children:a(ey,{model:t})}),n&&a(ee,{variant:"body-01",marginTop:"spacing-01",children:a(ey,{model:n})}),o?.text&&null!==o.url&&a(e2,{scope:{saItemName:"AttractionAboutWebSection",saItemType:"improveThisListing",pageGeoId:m,pageLocationId:p,pageName:u,scopeType:"standalone",team:"Attractions"},children:a($,{href:o.url,variant:"secondary",size:"large",fullWidth:l,marginTop:"spacing-04",onClick:s,children:a(ey,{model:o.text})})})]}),a("div",{className:iI,children:a(k,{})})]})},iS={container:"zdtsV f",topBar:"qyzqH f k w",labels:"afslK",ratingAndSocial:"PAqCz f",ratingNoBullet:"TsbnI f",saveAndShare:"zyTzN f"},iR=({model:e,container:t})=>{var{labels:n,numberReviews:r,rating:l,socialPromotionalInfo:o,supplierLink:d}=e,{url:s,text:c}=er({internalLink:d}),{trackClick:u}=eY(),{scrollToSection:p}=S(),m="MOBILE"===Y(),g=tw(),b=g?.MAIN_H1||null,h=tr(),f=h?.supplierId&&h.supplierReviews.length>0,_=n&&n.length>0;return i("div",{className:iS.container,children:[_&&a("div",{className:iS.topBar,children:a("div",{className:iS.labels,children:a(tC,{model:n})})}),i("div",{className:iS.topBar,children:[i("div",{children:[a(ee,{variant:"title-02",marginBottom:"spacing-02",elementType:"h1",dataAttributes:{"data-automation":"mainH1"},children:b}),null!=c&&null!=s&&a(X,{leftAlign:!0,onClick:e=>{f&&(e.preventDefault(),u({clientContext:"supplier"}),p("WebPresentation_AttractionProductAboutTheOperatorPlaceholder"))},href:s,target:"_blank",children:a(ee,{variant:"body-01",children:a(ey,{model:c})})})]}),!!t&&!m&&a("div",{className:iS.saveAndShare,children:a(tA,{model:t})})]}),(null!==l&&null!==r||o)&&i("div",{className:iS.ratingAndSocial,children:[null!==l&&null!==r&&a("div",{className:iS.ratingNoBullet,children:a(y,{rating:l,numReviews:r,onClick:e=>{e.preventDefault(),u({clientContext:"review"}),p("WebPresentation_PoiReviewsAndQAWeb")}})}),o&&a(tT,{model:o,variant:"supporting-01",iconPaddingVariant:"small",iconSizeVariant:"large"})]})]})},iD=({link:e})=>{var{text:t,eventId:i,trackingContext:n}=e,r=eQ(),{trackClick:l}=eY({clientContext:n}),o=el(),d=U(()=>{l(),o(i)},[i,l,o]);return null==t?null:a("button",{className:Z("jaLBh _G B- _S d _T c G_ y",r),onClick:d,children:a(ey,{model:t})})},iO=e=>{switch(e){case"accessible":return a(tx,{size:24});case"checkmark":return a(tN,{size:24});case"child":return a(tI,{size:24});case"clock":return a(e3,{size:24});case"group-tour":return a(e5,{size:24});case"mobile-phone":return a(e9,{size:24});case"pet-friendly":return a(e7,{size:24});case"train":return a(tW,{size:24});case"twenty-four-hour-cancellation":return a(tS,{size:24});case"verified-checkmark-fill":return a(tR,{size:24});default:return null}},iL=({model:e})=>{var{title:t,description:n,icon:r,link:l}=e,o=iO(r);return i("div",{className:"Ybevl Q2",children:[null!=o&&a("span",{children:o}),i("div",{className:"pPvUE",children:[t&&a(ee,{variant:"supporting-01",children:a(ey,{model:t})}),n&&a(ee,{variant:"supporting-01",children:a(ey,{model:n})}),l&&a(ee,{variant:"supporting-01",children:a(aw,{link:l})})]})]})},iE=({children:e})=>{var{scrollContainerProps:t,scrollButtonsProps:n}=tO();return a("div",{className:"EATTi _T",children:i("ul",{className:"eCALs f _e",...t,children:[j.map(e,e=>i("li",{className:"NZJiR f F0",children:[e,a("div",{"data-carousel-waypoint":!0})]},e.key)),a(tD,{...n})]})})},iM=({model:e})=>{var{sectionTitle:t,highlight:n,keyDetails:r}=e,[l,{openModal:o,closeModal:d}]=en("lowPriceGuaranteeDetails");ed("LOW_PRICE_GUARANTEE_OPEN_OVERLAY",o);var s=null!=n;if(!r)return null;var c=r.filter(Boolean).map((e,t)=>a(aA,{model:e},t));return i("div",{className:Z("ZeOcM",{mEOOU:s}),children:[i("div",{className:Z({pwykm:!s}),children:[t&&a(ee,{variant:n?"body-01":"title-03",children:a(ey,{model:t})}),n&&a(ee,{variant:"title-03",marginTop:"spacing-03",children:a(ey,{model:n})})]}),a("div",{className:Z("ZoaTV",{zMHub:s,TNKPH:!s}),children:c}),a("div",{className:"naVyA Mm",children:a(aB,{children:c})}),l&&a(tB,{onClose:d})]})},iz="/TransparencyReport2023",iF=({onClose:e,review:t})=>{var{localize:n}=eT(),r=eA(),l=t.relativePublishedDate||"",o=t.dateText||"",d=l||o?r.formatDate("date_long",new Date(l||o)):null,s=t.photoUrls?.filter(Boolean).map(e=>a(tU,{alt:t.productName,source:e,roundingSize:"medium",height:100,width:100},e))||[],c=t.experienceDate?n("{0}游览","supplier_trust_module_visited",{0:r.formatDate("date_medium_month_year",t.experienceDate)}):null;return i(td,{onClose:e,children:[a(tF,{variant:"three-line",profileInfo:[{displayName:t.screenName||"",avatarSource:t.avatarUrl}],additionalInfo1:t.location,additionalInfo2:a(eB,{id:"attractions_n_contributions_plural",args:{1:`${t.totalContributions}`},messages:"<span class=\"{0}\">{1}</span> {1, plural, other {条分享}}"}),marginBottom:"spacing-03"}),a(tE,{size:"small",rating:t.rating||0,label:c,marginBottom:"spacing-02"}),a(ee,{variant:"title-04",marginBottom:"spacing-02",children:t.displayTitle}),t.displayText&&a(ee,{variant:"body-01",children:t.displayText}),t.productName&&t.productUrl&&a(X,{href:t.productUrl,target:"_blank",marginY:"spacing-03",children:a(eC,{id:"attractions_review_of_activity",args:{activityName:t.productName},messages:"点评活动： {activityName}"})}),d&&a(ee,{variant:"supporting-02",marginBottom:"spacing-02",children:a(eC,{id:"user_review_written_date",args:{date:d},messages:"撰写日期：{date}"})}),a("div",{className:"nuVpo f Q1",children:s}),a(ee,{variant:"supporting-02",marginTop:"spacing-02",children:a(eB,{id:"omnibus_review_member_transparency",args:{link:`"${iz}"`,class:'"awyqb"',target:'"_blank"'},messages:"此点评为 Tripadvisor 会员所写的主观评论，并不代表 TripAdvisor LLC 的观点。为符合我们业界领先的信任和安全标准，Tripadvisor 会对点评进行检查。阅读我们的<a href={link} class={class} target={target}>透明度报告</a>，了解更多信息。"})})]})},iU={reviewContainer:"MGMVT",reviewContainerBase:"hYnnA z B1 Z BB",oneReviewContainer:"jwuMQ",imageAndNameContainer:"f u MJ",cta:"ifjNr _S n Ci",writtenDate:"Me",bubbleRating:"kyhmT"},iV=({review:e,supplierHasExactlyOneReview:t})=>{var n=eA(),{trackInteraction:r}=e1(),[l,o]=V(!1),d=U(()=>{r({type:"click",subType:"readMoreReview"}),o(!0)},[r]),s=U(()=>{r({type:"click",subType:"closeReview"}),o(!1)},[r]),c=e.relativePublishedDate||"",u=e.dateText||"",p=c||u?n.formatDate("date_long",new Date(c||u)):null;return i("div",{className:Z(iU.reviewContainerBase,{[iU.reviewContainer]:!t,[iU.oneReviewContainer]:t}),children:[i("div",{className:iU.imageAndNameContainer,children:[a(tL,{alt:e.screenName,source:e.avatarUrl,size:"large",marginRight:"spacing-02"}),i("div",{children:[a(ee,{variant:"supporting-01",children:e.screenName}),a(ee,{variant:"supporting-02",marginTop:"spacing-01",children:e.locationParentAbbreviated}),a(ee,{variant:"supporting-02",marginTop:"spacing-01",children:a(eB,{id:"attractions_n_contributions_plural",args:{1:`${e.totalContributions}`},messages:"<span class=\"{0}\">{1}</span> {1, plural, other {条分享}}"})})]})]}),a("div",{className:iU.bubbleRating,children:a(tM,{rating:e.rating||0,size:"small"})}),a(ee,{variant:"title-05",lineClamp:2,textOverflow:"ellipsis",marginBottom:"spacing-02",children:e.displayTitle}),a(ee,{variant:"body-01",children:a(e0,{collapsed:!0,contentClickCanCollapseContent:!1,numLinesToShow:4,webkitLineClamp:!0,cta:e=>a(X,{onClick:e,children:a("div",{className:iU.cta,children:a(eC,{id:"common_Read_more",messages:"阅读更多"})})}),clickCallback:e=>("CTA"===e&&d(),!1),children:e.displayText})}),p&&a(ee,{variant:"supporting-02",children:a("div",{className:iU.writtenDate,children:a(eC,{id:"user_review_written_date",args:{date:p},messages:"撰写日期：{date}"})})}),l&&a(aN,{onClose:s,review:e})]},e.reviewId)},iH={supplierInfoContainer:"eQlAH B1 Z BB z",supplierThumbnail:"BqTPC o",badgeContainer:"cVfMf",supplierData:"f e u Mk Nk MK NM",locationContainer:"f u",bubbleRatingWithReviewContainer:"gwmOZ"},iG=({supplierData:e})=>{var t=e.supplierThumbnailPhotoSizes?.[e.supplierThumbnailPhotoSizes.length-1],{trackInteraction:n}=e1(),r=U(()=>{n({type:"click",subType:"badge"})},[n]),l=eA(),o=e?.supplierPublishedDate&&l.formatDate("date_full_month_year",new Date(e.supplierPublishedDate)),d=e?.supplierLocation?.length&&e.supplierLocation.length>25;return i("div",{className:iH.supplierInfoContainer,children:[t&&i("div",{className:iH.supplierThumbnail,children:[a(tH,{href:e.supplierUrl,onClick:()=>n({type:"click",subType:"supplierImage"}),target:"_blank",theme:"image",children:a(tU,{source:t.url,width:"100%",height:"100%",aspectRatio:"4:3"})}),a("div",{className:iH.badgeContainer,children:a(tG,{onClick:r,locationId:e.supplierId,size:"small"})})]}),i("div",{className:iH.supplierData,children:[a("a",{href:e.supplierUrl,target:"_blank",onClick:()=>n({type:"click",subType:"supplierName"}),children:a(ee,{variant:"title-05",marginBottom:"spacing-02",lineClamp:3,children:e.supplierName})}),a("div",{className:iH.bubbleRatingWithReviewContainer,children:a(tz,{rating:e.overallRating,numReviews:e.totalReviewCount,marginBottom:"spacing-03",size:"small"})}),i("div",{className:iH.locationContainer,children:[a(tV,{marginRight:"spacing-01",size:16}),a(ee,{variant:"supporting-01",children:d?e.supplierCountry:e.supplierLocation})]}),o&&a(ee,{variant:"supporting-01",marginTop:"spacing-02",children:a(eC,{id:"about_the_operator_join_date_apr",args:{date:o},messages:"于 {date}加入"})})]})]})},iq={__key:0x84c70b08f67c,id:"84c70b08f67c35c5",loc:{},definitions:[]},iQ=()=>{var e=tr(),t={query:iq,variables:{locationId:e?.supplierId||0}},[a]=tq(t);return F(()=>{if(!e)return null;var{data:t}=a,i=t&&t.coeAward&&t.coeAward[0];return{...e,hasCertificateOfExcellence:!!i}},[a,e])},iK={aboutOperatorContainer:"jBeYl f M0 y",carouselWrapper:"wVAXw",carouselWrapperSeveralReviewsFullWidth:"gmeDy",carouselWrapperOneReviewFullWidth:"WBPVG",link:"uVleF"},ij=()=>{var e,{trackInteraction:t}=e1(),r=eA(),l=aS(),o=U(()=>t({type:"click",subType:"seeAllReviews"}),[t]),d=U(()=>t({type:"scroll",subType:"reviews"}),[t]);if(!l||!l.supplierId||!l.supplierReviews||0===l.supplierReviews.length)return null;var s=1===l.supplierReviews.length,c=l.supplierReviews.length>1,u=r.formatNumber("integer",l.totalReviewCount),p=l.supplierUrl?`${l.supplierUrl}#REVIEWS`:null;return e=c?iK.carouselWrapperSeveralReviewsFullWidth:s?iK.carouselWrapperOneReviewFullWidth:iK.carouselWrapper,a(e2,{scope:{scopeType:"item",itemType:"aboutOperator",itemId:"aboutOperator"},children:i("div",{children:[a(ee,{variant:"title-03",marginBottom:"spacing-03",children:a(eC,{id:"about_the_operator_title_apr_v2",messages:"关于运营方"})}),a(ee,{variant:"body-01",marginBottom:"spacing-03",children:a(eC,{id:"about_the_operator_sub_title_apr_v2",messages:"以下是旅行者对该运营商的意见，这些信息并非由我们提供："})}),a("div",{className:iK.aboutOperatorContainer,children:a("div",{className:e,children:i(th,{variableHeight:!0,onScrolled:d,fullBleed:!0,children:[a(aW,{supplierData:l}),l.supplierReviews?.map(e=>a(aI,{review:e},e.reviewId))]})})}),c&&p&&i(n,{children:[a(X,{variant:"primary-small",href:p,target:"_blank",onClick:o,marginY:"spacing-03",children:a(eC,{id:"attraction_about_operator_see_all_reviews_pl",args:{0:u},messages:"查看全部 {0, plural, other {点评}} 条"})}),a(eV,{})]}),a(ee,{variant:"supporting-01",marginTop:"spacing-03",children:a(eB,{id:"omnibus_reviews_members_transparency",args:{link:`"${iz}"`,class:`"${iK.link}"`,target:'"_blank"'},messages:"这些点评均为 Tripadvisor 会员所写的主观评论，并不代表 Tripadvisor LLC 的观点。为符合我们业界领先的信任和安全标准，Tripadvisor 会对点评进行检查。阅读我们的<a href={link} class={class} target={target}>透明度报告</a>，了解更多信息。"})})]})})},iY=()=>{var{page:e}=J();return"AttractionProductReview"!==e?null:a("section",{className:"OpvPE _T","data-automation":"aboutTheOperatorSection",children:a(aR,{})})},iJ=({model:e,leftHandRailAds:t,container:i})=>{var{getAdPosition:n}=C();switch(e.__typename){case"WebPresentation_AlertSection":return null;case"WebPresentation_AdPlaceholder":return a(tp,{model:e,inlineAdCounter:n(e)});case"WebPresentation_AttractionProductAboutTheOperatorPlaceholder":return a(aD,{});case"WebPresentation_AsFeaturedInWidgetPlaceholder":return a(tk,{});case"WebPresentation_AttractionProductItineraryPlaceholder":return a(iN,{});case"WebPresentation_AttractionHighlightedReviewsPlaceholder":return a(ty,{});case"WebPresentation_DisclaimerSection":return a(tm,{model:e});case"WebPresentation_NarrowCardsCarousel":return a(ak,{model:e});case"WebPresentation_MediumCardsCarouselWeb":return a(tg,{model:e});case"WebPresentation_PoiContribute":return a(N,{model:e});case"WebPresentation_PoiHoursWeb":return a(x,{model:e});case"WebPresentation_PoiImproveThisListing":return a(aC,{model:e});case"WebPresentation_ProductAboveTheHeroInfo":return a(aT,{model:e,container:i});case"WebPresentation_ProductKeyDetailsWebSection":return a(ax,{model:e});case"WebPresentation_PoiOverviewWeb":return a(B,{model:e});case"WebPresentation_PoiReviewsAndQAWeb":return a(A,{model:e,leftHandRailAds:t});case"WebPresentation_TabbedSectionWeb":return a(w,{model:e});case"WebPresentation_WideCardsCarousel":return a(tP,{model:e});case"WebPresentation_OmnibusDisclosure":return a(T,{model:e});default:return a(l,{typename:e.__typename})}},iZ=e=>["WebPresentation_AttractionHighlightedReviewsPlaceholder"].includes(e.__typename),i$=e=>["WebPresentation_PoiOverviewWeb","WebPresentation_AdPlaceholder","WebPresentation_ProductAboveTheHeroInfo","WebPresentation_ProductKeyDetailsWebSection","WebPresentation_OmnibusDisclosure","WebPresentation_AttractionProductAboutTheOperatorPlaceholder","WebPresentation_CategoryPivotsCarousel"].includes(e.__typename),iX=e=>["WebPresentation_CategoryPivotsCarousel"].includes(e.__typename),i0=(e,t)=>"stableDiffingType"in e&&null!=e.stableDiffingType?e.stableDiffingType:`item-${String(t)}`,i4=({model:e,leftHandRailAds:t,container:i})=>{var n,{detailSections:r}=e,l="MOBILE"!==Y(),o=ti(),d=tn(),c=null!=o||null!=d,{sectionRefMapping:u}=S();return r?.length?r.filter(Boolean).filter(e=>!aL.includes(e.__typename)&&!(l&&aE.includes(e.__typename))&&(c||"WebPresentation_AttractionProductItineraryPlaceholder"!==e.__typename)).map((e,r)=>{if(I(e)){var l=null!=n&&r-n<=2;if(n=r,l)return null}return a(v,{id:P(e.__typename),ref:u.get(s(e)),dataAttributes:{"data-automation":e.__typename},fullWidth:iZ(e),collapsedPadding:i$(e),fullBleedMobile:iX(e),children:a(aO,{model:e,leftHandRailAds:t,container:i})},i0(e,r))}):null},i2=e=>e.map(e=>{if("WebPresentation_BasicPhotoWithLink"===e.__typename){var t=e.photoSizes?.map(e=>({url:e?.url,height:e?.height,width:e?.width})).filter(Boolean)??[];return{id:e.id,imageSource:t}}if("WebPresentation_Media"===e.__typename&&e.data?.__typename==="Media_PhotoResult"){var a={urlTemplate:e.data?.photoSizeDynamic?.urlTemplate,maxWidth:e.data?.photoSizeDynamic?.maxWidth,maxHeight:e.data?.photoSizeDynamic?.maxHeight};return{id:e.mediaId,imageSource:a}}return null}).filter(Boolean)??[],i1={imageContainer:"ARdFa A Q1 o",oneImageContainer:"w",twoImageContainer:"kpcLM",threeImageContainer:"QMhre",right:"vmyir",left:"kZBQY",top:"QtbAN",bottom:"iEnKv",clickable:"NnMPl _S B- Gm H0",photoLink:"qLdZn"},i3=({onHeroClick:e,onSeeAllPhotosClick:t,images:n,totalPhotoCount:r})=>{var{localize:l}=eT();return 0===n.length?null:1===n.length?a("div",{className:Z(i1.imageContainer,i1.oneImageContainer),children:a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[0].id??-1,type:"p"})},className:i1.clickable,children:a(tU,{source:n[0].imageSource,width:"100%",height:"100%",lazy:!1})})}):2===n.length?i("div",{className:Z(i1.imageContainer,i1.twoImageContainer),children:[a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[0].id??-1,type:"p"})},className:Z(i1.clickable,i1.left),children:a(tU,{source:n[0].imageSource,width:"100%",height:"100%",lazy:!1})}),a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[1].id??-1,type:"p"})},className:Z(i1.clickable,i1.right),children:a(tU,{source:n[1].imageSource,width:"100%",height:"100%",lazy:!1})})]}):i(tZ,{className:Z(i1.imageContainer,i1.threeImageContainer),size:"xlarge",children:[a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[0].id??-1,type:"p"})},className:Z(i1.clickable,i1.left),children:a(tU,{source:n[0].imageSource,width:"100%",height:"100%",lazy:!1})}),a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[1].id??-2,type:"p"})},className:Z(i1.clickable,i1.top),children:a(tU,{source:n[1].imageSource,width:"100%",height:"100%",lazy:!1})}),a("button",{"aria-label":l.string("查看所有照片","mobile_tablet_see_all_photos_no_count"),onClick:()=>{e({id:n[2].id??-3,type:"p"})},className:Z(i1.clickable,i1.bottom),children:a(tU,{source:n[2].imageSource,width:"100%",height:"100%",lazy:!1})}),r>3&&a("div",{className:i1.photoLink,children:a($,{variant:"primary",size:"small",onClick:t,children:a(eC,{id:"mobile_tablet_see_all_photos_no_count",messages:"查看所有照片"})})})]})},i6=({model:e,locationId:t})=>{var{page:r}=J(),{trackClick:l}=eY(),o=e?.heroStandardContent?.filter(Boolean),[d,s]=V(null),c=String(r),u=tK(c),p={...tj,...tY(c)},m=U(e=>{l({clientContext:"MediaWindow_HeroPhoto"}),s({mediaId:e,albumId:u})},[u,l]),g=U(()=>{s(null)},[s]),b=U(()=>{l({clientContext:"MediaWindow_PhotoCountClick"}),s({albumId:u})},[s,u,l]);if(!o)return null;var h=i2(o);return i(n,{children:[i("div",{className:"_T",children:[a(az,{onHeroClick:m,onSeeAllPhotosClick:b,images:h,totalPhotoCount:e?.photoCount}),a(tJ,{locationId:t})]}),a(tQ,{locationId:t,initialSettings:d,onClose:g,...p.mediaViewerParams})]})},i5=()=>i(ee,{variant:"body-01",children:[a(eC,{id:"fusion_generic_retry_error_message",messages:"我们遇到了一点小状况。我们在处理您的请求时遇到问题。请重试。"}),a(X,{href:"#",onClick:()=>window.location.reload(),marginTop:"spacing-03",marginLeft:"spacing-01",children:a(eC,{id:"fusion_generic_error_reload_cta",messages:"重新加载"})})]}),i9={dimmed:"heqqx S",errorWrapper:"NvHSs",cta:"HLsrO",freeCancellation:"lBtTM Q2"},i8=()=>{},i7=({model:e})=>{var{datePicker:t,commerceLink:r,exploreLink:l,noCommerceMessage:o,languageOptions:d}=e,[s,c]=V(!0),u=eu(t),[p,m]=V(),{localize:g}=eT(),{trackClick:b}=eY(),[h,{openModal:f,closeModal:_}]=ei({trackingContext:"checkAvailability"}),[{isTest:v},P]=eF(),k=t4(),[y,C]=eg({initialStep:"TOURGRADES"}),{step:T,selectedTourGrade:w,isBooking:A,isDuplicateItemError:B}=y,{incrementQueryFailure:x,incrementOfferSeen:N}=eb(),I=d?.languageOptions&&d.languageOptions.length>1,W=v&&I,S=null,R=null,D=null;r?.webRoute?.typedParams?.__typename==="Routing_AttractionCommerceParameters"&&({contentId:S,contentType:R,state:D}=r.webRoute.typedParams);var[{data:O,fetching:L,error:E,polling:M},z]=eh({contentId:S,contentType:R,state:D}),G=O?.sections?.find(ef),q=O?.sections?.find(e_),{datePicker:Q,noCommerceMessage:K,freeCancellationMessage:j,tags:Y}=G??{},J=eu(Q),Z=J?.passengerInfo?.perAgeBandPricing&&u?.passengerInfo?{...u,passengerInfo:{...u.passengerInfo,perAgeBandPricing:J.passengerInfo.perAgeBandPricing||null}}:u,X=Y?a(e$,{model:Y}):null,et=j?a(tX,{model:j}):X,{text:ea,url:en}=eo(l);H(()=>{I&&P()},[I,P]),H(()=>{(L||M)&&w&&C({type:"SELECT_TOUR",tour:null}),!(L||M)&&w&&N()},[L,M,w,C,N]);var er=U(e=>{C({type:"SELECT_TOUR",tour:e})},[C]),el=U(()=>{C({type:"ERROR"}),b({clientContext:"errorScreen"})},[C,b]);H(()=>{E&&(console.error("[Fusion][Availability] attraction commerce query resulted in an error",E.message),el(),x())},[E,el,x]);var ed=ev(),es=U(()=>{ed(w,b,C,el,"inline")},[ed,w,b,C,el]),em=!L&&!M&&!E&&!o&&!K&&q?.tourGrades?.length,ew=a($,{onClick:es,variant:"commerce",disabled:!w||A||B,loading:A,dataAttributes:{"data-automation":"attractions-commerce-modal-primary"},"aria-label":g.string("预订门票","fusion_attraction_commerce_booking"),fullWidth:!0,children:a(eC,{id:"attractions_booking_reserve_now",messages:"立即预订"})}),eA=F(()=>({setTicketInfo:i8,clearTourGrade:i8,onSelectTicket:i8,onSelectTourGrade:er,selectedTourGrade:w}),[er,w]),eB=E||T.endsWith("ERROR");return i(eP.Provider,{value:eA,children:[h&&a(ep,{onClose:()=>{m(void 0),_()},initialStep:"TOURGRADES",tourContentInfo:{contentId:S,contentType:R,contentState:D},trackingKey:e.trackingKey,autoExpandTourGradeIndex:p}),i("div",{className:A?i9.dimmed:void 0,children:[!eB&&e.title&&a(ee,{variant:"title-03",marginBottom:"spacing-04",children:a(ey,{model:e.title})}),eB&&a("div",{className:i9.errorWrapper,children:"GENERIC_ERROR"===T&&a(aU,{})}),!eB&&Z&&a(t8,{buttonDatePickerAutomationTag:"inline-booking-date-picker",buttonPaxPickerAutomationTag:"inline-booking-pax-picker",autoAdvance:s,datePickerConfig:Z,variant:"legacy",fullWidthPaxApplyButton:!0,onClose:e=>{e?.name==="pax"&&c(!1)},trackingTitle:"inlineBooking"}),!eB&&W&&a(ec,{model:d,fullWidth:!0,marginTop:"spacing-02"}),!eB&&!o&&a(ek,{duplicateItemError:B,fetching:L,polling:M,result:O,update:z,openModal:()=>{b({clientContext:"clickAllTourOptions"}),f(),k({event:"IB_CLICK"})},variant:"compact",onSeeAllTimes:e=>{m(e),f(),k({event:"IB_CLICK"})}})]}),o&&i(n,{children:[a(ee,{variant:"body-01",children:a(ey,{model:o})}),ea&&null!=en&&a($,{variant:"primary",size:"medium",href:en,marginTop:"spacing-05",children:a(ey,{model:ea})})]}),em&&a("div",{className:i9.cta,children:ew}),!(L||M||eB)&&et&&i("div",{className:i9.freeCancellation,children:[a(t0,{size:12}),a(ee,{variant:"input-03",color:"secondaryText",elementType:"span",children:et})]}),v&&a(eU,{})]})},ne=({model:e})=>{var{fullProduct:t}=ta(),i=t?.productCode??null,{params:n}=J(),r=("detailId"in n?n.detailId:0)??0,{isClickOff:l}=eZ(e.isExperiencesPaidTraffic??!1);return l?a(ar,{model:{...e,productCode:i,locationId:r,hasPartnerRedirectUrl:e.hasPartnerRedirectUrl??!1}}):a(aV,{model:e})},nt={container:"wAiJR",hero:"tdAhP A",primary:"SHPAN",inlineBooking:"bHlqs E Ra Ft"},na=({model:e,container:t})=>{var{sectionRefMapping:r,scrollOffset:l}=S(),{isStickyHeaderOpen:o}=D(),{hero:d,primaryList:s,inlineBooking:c}=e,u=Y(),p="DESKTOP"===u,{params:m}=J(),g=r.get(e.__typename),[b,{openModal:h,closeModal:f}]=en("rnplAdditionalInfo");ed("RESERVE_NOW_PAY_LATER_OPEN_OVERLAY",h);var[_,{openModal:k,closeModal:y}]=en("lowPriceGuaranteeDetails");ed("LOW_PRICE_GUARANTEE_OPEN_OVERLAY",k);var C=p?{top:`${o?l:10}px`}:void 0,T="detailId"in m&&m.detailId||0,w=s?.filter(Boolean)||[],A=p&&c?.__typename==="WebPresentation_InlineBooking";return i(n,{children:[a(v,{id:P(e.__typename),ref:g,dataAttributes:{"data-automation":e.__typename},collapsedPadding:!0,children:i("div",{className:nt.container,children:[a("div",{className:nt.hero,children:d&&("MOBILE"===u?a(O,{model:d}):a(aF,{model:d,locationId:T}))}),a("div",{className:nt.primary,children:a(a_,{primaryList:w,container:t,isInlineBooking:A})}),A&&a("div",{className:nt.inlineBooking,style:C,children:a(aH,{model:c})})]})}),b&&a(t$,{onClose:f}),_&&a(tB,{onClose:y})]})},ni=({model:e,leftHandRailAds:t,container:i})=>{switch(e.__typename){case"WebPresentation_PoiAboveTheFoldSectionGroup":return a(av,{model:e,container:i});case"WebPresentation_PoiInlineBookingSectionGroup":return a(aG,{model:e,container:i});case"WebPresentation_PoiListSectionGroup":return a(aM,{model:e,leftHandRailAds:t,container:i});default:return a(l,{typename:e.__typename})}};return[()=>{t2=aj,t1=aY,t3=aZ,t6=aX,t5=a0,t9=a4,t8=a2,t7=a1,ae=r(a3),at=new eH({metricName:"J0gaAfFntpIJBnYT8QVgJuTx8Y+W4tIZvwBzRrL3MXqYv8U1tiivGXcNf5x3NeJeHcsH9t1mz+zodWpP1VeQerNo+PYHIQvJg5GFdMOTh5Y=",version:0,additionalLabels:["J0gaAfFntpIJBnYT8QVgJuTx8Y+W4tIZvwBzRrL3MXqPoZ9WvW0U1A7oSmvkFvKLATShOlbriVZdWid3JJejfMc7FgxnVZIyQs3Y4G2lOoAoKmQTMjPo+dovkWLMSZFj"],labelHooks:[eG]}),aa=a8,ai=a7,an=ie,ar=r(({model:e})=>{var{isPerGroupPricing:t,isTieredPricing:n,maxTravelersPerUnit:r,price:l,strikeThroughPrice:o,exploreLink:d,noCommerceMessage:s,title:c,valueProps:u,wrappedPricing:p=!0,showDivider:m=!0,hasPartnerRedirectUrl:g,productCode:b,locationId:h,...f}=e,_="MOBILE"===Y(),v="DESKTOP"===Y(),{ctaText:P}=ai(h,b),k=at.useConstantIncrementCallback(),y=!g,C=!!s||y,{text:T,url:w}=eo(d);return(H(()=>{s||(l||console.error("[Affiliate] The price was missing from affiliate commerce data, still showing button"),g||console.error("[Affiliate] there was no url available for click off"),P||console.error("[Affiliate] there was no affiliate button text available for click off")),w&&T||!C||console.error("[Affiliate] There were pieces of the affiliate no commerce data missing, showing what's available")},[l,w,T,C,s,g,P]),H(()=>{b||console.error("[Affiliate] there was no product code available for click off")},[b]),H(()=>{y&&!s?k(a6.MISSING_AFFILIATE_URL):k(a6.SUCCESS)},[y,s,k]),C)?i("div",{className:it.noCommerce,children:[a("div",{className:it.title,children:a(ee,{variant:v?"title-03":"title-04",children:a(eC,{id:"exp_currently_unavailable",messages:"当前不可预订"})})}),a("div",{className:it.text,children:a(ee,{variant:"body-01",children:a(eC,{id:"exp_booking_unavailable_message",messages:"此产品不可预订。"})})}),T&&w&&a("div",{className:it.cta,children:a($,{variant:"primary",size:"medium",fullWidth:_,href:w,children:a(ey,{model:T})})})]}):i("div",{className:eN(eI(f)),children:[c&&a(ee,{variant:"title-03",marginBottom:"spacing-04",children:a(ey,{model:c})}),i("div",{className:it.priceAndLink,children:[l&&a("div",{className:it.priceWrapper,children:a(t2,{isPerGroupPricing:t,isTieredPricing:n,maxTravelersPerUnit:r,price:a(ey,{model:l}),strikeThroughPrice:o&&a(ey,{model:o}),variant:"large",wrappedPricing:p})}),a("div",{className:it.linkWrapper,children:a(an,{isPerGroupPricing:t,price:l,locationId:h,productCode:b,strikeThroughPrice:o})})]}),m&&a(eV,{marginY:"spacing-04"}),u&&a(aa,{valueProps:u.filter(Boolean)??[]})]})}),al=r(ia),ao=r(ii),ad=r(ir),as=il,ac=is,au=r(ic),ap=r(im),am=r(ib),ag=r(ih),ab=r(iP),ah=ik,af=r(iy),a_=iw,av=r(iA,{trackVisible:!1}),aP=r(q(iB,tb)),ak=r(q(ix,tb)),ay=K(()=>t("h7b4bm")),aC=r(q(iW,tb)),aT=r(iR),aw=iD,aA=iL,aB=iE,ax=r(iM),aN=iF,aI=iV,aW=iG,aS=iQ,aR=ij,aD=iY,aO=iJ,aL=tu(["WebPresentation_AlertSection"]),aE=tu(["WebPresentation_PoiHoursWeb"]),aM=r(i4,{trackVisible:!1}),az=i3,aF=r(i6),aU=i5,aV=r(i7),aH=r(ne),aG=r(na,{trackVisible:!1}),e("default",ni)},[e=>(a=e.jsx,i=e.jsxs,n=e.Fragment),e=>(r=e.fused,l=e.WPSUnsupportedType),e=>(o=e.A,d=e.c,s=e.g,c=e.d,u=e.i,p=e.e,m=e.f,g=e.h,b=e.j,h=e.k,f=e.l,_=e.m,v=e.S,P=e.n,k=e.C,y=e.B,C=e.o,T=e.W,w=e.T,A=e.P,B=e.p,x=e.q,N=e.r,I=e.s),e=>(W=e.usePersistentCommerceContext,S=e.useSectionScrollContext,R=e.useRegisterScrollHandler,D=e.useStickyHeaderContext),e=>O=e.PoiHeroStandardWeb,e=>(L=e.default,E=e.StatusCounter,M=e.Component,z=e.Status),e=>(F=e.useMemo,U=e.useCallback,V=e.useState,H=e.useEffect,G=e.useRef,q=e.memo,Q=e.Suspense,K=e.lazy,j=e.Children),e=>Y=e.useViewportCategory,e=>J=e.useRoute,e=>Z=e.default,e=>($=e.default,X=e.BorderlessButton),e=>ee=e.default,e=>(et=e.default,ea=e.StrikethroughPrice),e=>(ei=e.useFragmentControlledModal,en=e.useModalWithTracking),e=>(er=e.deriveLinkInfo,el=e.useMessageLinkDispatch,eo=e.deriveLinkInfoFromInternalLink,ed=e.useMessageLink),e=>(es=e.u,ec=e.L,eu=e.a,ep=e.A,em=e.c,eg=e.b,eb=e.d,eh=e.e,ef=e.i,e_=e.f,ev=e.g,eP=e.B,ek=e.D),e=>ey=e.default,e=>(eC=e.default,eT=e.useLocalize,ew=e.useLanguage,eA=e.useIntlFormatter,eB=e.UnsafeLocalize),e=>ex=e.OverlayPortal,e=>(eN=e.default,eI=e.margin),e=>eW=e.d,e=>(eS=e.default,eR=e.useAttractionDates,eD=e.useSingleDateChangerText,eO=e.useSingleDatePicker,eL=e.useAttractionPax,eE=e.usePaxPicker,eM=e.useSingleDateChangerArrow),e=>(ez=e.useCheckAvailabilityLanguageFilterMobileTest,eF=e.useCheckAvailabilityLanguageFilterDesktopTest,eU=e.AprLanguageSelectorHotjar),e=>eV=e.default,e=>(eH=e.Counter,eG=e.useWebApplicationLabel,eq=e.ErrorBoundary),e=>eQ=e.useKeyboardFocusableClassName,e=>eK=e.default,e=>ej=e.default,e=>eY=e.useTracking,e=>eJ=e.useIsRobotSafe,e=>eZ=e.useViatorClickOffTestBucket,e=>e$=e.default,e=>eX=e.Tooltip,e=>e0=e.ReadMore,e=>e4=e.useFusionTracking,e=>(e2=e.TrackingScope,e1=e.useTracking),e=>e3=e.default,e=>e6=e.default,e=>e5=e.default,e=>e9=e.default,e=>e8=e.default,e=>e7=e.default,e=>(te=e.useWhatToExpectModel,tt=e.useOverviewModel,ta=e.useFullProductData,ti=e.useProductItineraryModel,tn=e.useMDTProductItineraryModel,tr=e.useSupplierTrustData),e=>(tl=e.default,to=e.ControlledCollapsibleListItem),e=>td=e.Modal,e=>ts=e.useServiceBackedFaq,e=>tc=e.default,e=>tu=e.readOnly,e=>tp=e.default,e=>tm=e.default,e=>tg=e.default,e=>tb=e.default,e=>th=e.Carousel,e=>tf=e.FlexContainer,e=>t_=e.default,e=>tv=e.useIsLongLanguage,e=>tP=e.default,e=>tk=e.default,e=>ty=e.default,e=>tC=e.LabelsList,e=>tT=e.default,e=>tw=e.default,e=>tA=e.SaveAndShare,e=>tB=e.LowPriceGuaranteeModal,e=>tx=e.default,e=>tN=e.default,e=>tI=e.default,e=>tW=e.default,e=>tS=e.default,e=>tR=e.default,e=>(tD=e.default,tO=e.useHorizontalScrollButtonsState),e=>tL=e.Avatar,e=>(tE=e.BubbleRatingWithLabel,tM=e.BubbleRating,tz=e.BubbleRatingWithReviewCount),e=>tF=e.default,e=>tU=e.default,e=>tV=e.default,e=>tH=e.default,e=>tG=e.TravelersChoiceAwardBadgeWithDescription,e=>tq=e.useQuery,e=>tQ=e.default,e=>(tK=e.getDefaultAlbumId,tj=e.defaultMediaSettings,tY=e.getPageMediaSettings),e=>tJ=e.default,e=>tZ=e.RoundedContainer,e=>t$=e.default,e=>tX=e.default,e=>t0=e.FreeCancellationIconNew,e=>t4=e.useGTMCallback]]},["21h32l","kgddhk","7t2i55","efgdqy","k2n36y","6nmgrj","o4yt4q","ys6v1o","fgwvq1","fkji80","jppfwt","essqvy","ec91du","lsw8fw","3j2edp","6960rz","lg8go7","7thqz4","4euaes","gw8uw6","lnx7it","f1gfnw","2heyv0","covaqn","83pm0d","2r4qug","2t8e04","evvugf","rmpbxq","mb2nze","tbwmxo","ebif6s","7c3vnd","wgun1f","shtzu1","zzfm0c","w1yg77","rctp90","wp1i76","xb8dqr","nylcph","yy6083","wuy6gz","ahn2ts","i3sz5h","mhkl02","cpq4sr","5vmpsm","ia6ub7","g63p39","lbsqxm","b5nukb","7yaz66","9n0mx2","glaknn","b49gxf","wf1qjb","2j5if1","wdduvf","8aurmi","8i9zeu","6hf0eg","tjyt1c","b41ssc","2hdgr9","kq4q2w","77ib2x","vnfaws","9fds1k","u16nt0","aa8hvr","ljqkwp","bkeq24","dpmjfu","34bu7w","bp96i9","lr6tb6","98pb0s","mqwhqn","ejmcf4","r144n1","bw5mmp","fa3gob","l28j5y","qg907y","scxj49","904jnz"]]);
