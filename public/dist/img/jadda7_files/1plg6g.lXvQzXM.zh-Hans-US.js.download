(this.$WP=this.$WP||[]).push(["1plg6g",(e,t)=>{var n,i,a,r,o,s,d,l,c,m,p,u,h,_,b,E,f,v,y,g,I,S,T,P,N,x,k,w,A,D,M,O,C,L,R,B,H,F,z,V,$,G,W,U,X,Z,j,Y,q,K,Q,J,ee,et,en,ei,ea,er,eo,es,ed,el,ec,em,ep,eu,eh,e_,eb,eE,ef,ev,ey,eg,eI,eS,eT,eP,eN,ex,ek,ew,eA,eD,eM,eO,eC,eL,eR,eB,eH,eF,ez="apd_itinerary",eV=(e,t,n,i)=>{if(i(ep.clickStartSeeImportantInformation()),e||t)n();else{var a=T(g)-I-S;window.scrollTo({top:a,behavior:"smooth"})}},e$=()=>{var e="MOBILE"===f(),t=v(),{onSeeImportantInformationClick:i,preferSeeImportantCallback:a,importantInformationText:r}=d(eh),o=l(n=>{eV(e,a,i,t),n.stopPropagation()},[e,a,i,t]);return n("button",{className:"WzHgG _S Ci Wh","data-automation":"seeImportantInformationForDetails",onClick:o,type:"button",children:n(E,{elementType:"span",variant:"button-02",children:r})})},eG={zoom_control:"TOUPs _Q"},eW=(e=!1)=>e&&window.innerHeight>850?200:170,eU=(e,t)=>"TRIPADVISOR_API"!==e.serviceProvider&&e.name?e.name:t?.name?t.name:e.name,eX=(e,t)=>{var n=new Map,i=[{passedBys:[],latLng:null,locationDetails:null,index:0,label:"0",displayName:null}];return t&&t.forEach(e=>{e&&e.locationId&&n.set(e.locationId,e)}),e.forEach(e=>{if("NO_STOP"!==e.admissionInclusionTypeEnum){var t=e.taLocationId?n.get(e.taLocationId):null,a={passedBys:[],latLng:e.latitude&&e.longitude?new w(e.latitude,e.longitude):null,locationDetails:"TRIPADVISOR_API"===e.serviceProvider?t:null,index:i.length,label:String(i.length),displayName:eU(e,t),...e};i.push(a)}else i[i.length-1].passedBys.push(e.name)}),i},eZ=(e,t)=>{var n=new Map;t&&t.forEach(e=>{e&&e.locationId&&n.set(e.locationId,e)});var i=[{passedBys:[],latLng:null,locationDetails:null,index:0,label:"0",displayName:null}];return e.forEach(e=>{e.productItineraryItems.forEach(t=>{if("NO_STOP"!==t.admissionInclusionTypeEnum){var a=t.taLocationId?n.get(t.taLocationId):null,r={passedBys:[],latLng:t.latitude&&t.longitude?new w(t.latitude,t.longitude):null,locationDetails:a,index:i.length,label:String(e.groupNumber),displayName:eU(t,a),...t};i.push(r)}else i[i.length-1].passedBys.push(t.name)})}),i},ej=e=>e.filter(e=>"START"===e.startEndPointTypeEnum||"START_AND_END"===e.startEndPointTypeEnum),eY=e=>e.filter(e=>"END"===e.startEndPointTypeEnum||"START_AND_END"===e.startEndPointTypeEnum),eq=(e,t)=>!!t[-e-1]&&("START"===t[-e-1].startEndPointTypeEnum||"START_AND_END"===t[-e-1].startEndPointTypeEnum),eK=(e,t)=>!!t[-e-1]&&"END"===t[-e-1].startEndPointTypeEnum,eQ=(e,t,n)=>{switch(e){case"START":return n.string("起点 {0}","exp_start_point_num",{0:t});case"END":return n.string("终点 {0}","exp_end_point_num",{0:t});case"START_AND_END":return n.string("起点和终点 {0}","exp_start_and_end_point_num",{0:t});default:return""}},eJ=(e,t)=>t||eY(e).length>0,e0=(e,t,n,i,a)=>{var r="",o=null,s=null,d=null,l=null,c=ej(e),m=eY(e);if(i){if(t)r=a.string("您会回到出发点","exp_youll_return_to_the_starting_point");else{if(!(m.length>0))return null;r=a.string("游览终点为","exp_youll_end_at"),1===m.length&&([{name:o}]=m,[{address:d}]=m,[{instruction:l}]=m)}}else r=a.string("您有 {0, plural, other{# 个起点选项}}","exp_youll_have_num_starting_options",{0:c.length}),"PICKUP_EVERYONE"===n?r=a.string("您会享有接送服务","exp_youll_get_picked_up"):0===c.length?r=a.string("起点","exp_tour_start"):1===c.length&&(r=a.string("游览起点为","exp_youll_start_at_no_colon"),[{name:o}]=c,("MEET_EVERYONE_AT_START_POINT"===n||"UNDEFINED"===n)&&([{address:d}]=c,[{instruction:l}]=c)),"PICKUP_AND_MEET_AT_START_POINT"===n&&(s=a.string("或者，您也可以使用接送服务","exp_or_you_can_also_get_picked_up"));return{name:o,address:d,instruction:l,title:r,additionalInfo:s}},e1=(e,t)=>{var{durationInMinutes:n}=e;return n?n<120?t.string("停留： {0, plural, other{# 分钟}}","exp_stop_num_minutes",{0:n}):t.string("停留：{0} 小时","exp_stop_num_hours",{0:Math.round(n/60)}):""},e4=(e,t)=>{var{admissionInclusionTypeEnum:n}=e;if(n){if("YES"===n)return t.string("包含门票","exp_admission_included");if("NO"===n)return t.string("不包含门票费用","exp_admission_excluded")}return""},e2=(e,t)=>{var{inclusionTypeEnum:n}=e;if(e){if("BREAKFAST"===n)return t.string("早餐","attractions.booking.section.mdtitinerary.inclusion.breakfast");if("LUNCH"===n)return t.string("午餐","attractions.booking.section.mdtitinerary.inclusion.lunch");if("DINNER"===n)return t.string("晚餐","attractions.booking.section.mdtitinerary.inclusion.dinner")}return""},e3=(e,t)=>{switch(t.type){case"INIT_DATA":return{...e,itemsFormatted:t.itemsFormatted};case"SET_STOPS_EXPANDED":return{...e,stopsExpanded:t.stopsExpanded};case"SET_SELECTED_INDEX":if(e.mapInterface&&t.selectedIndex){var n=e.itemsFormatted[t.selectedIndex].latLng;null!=n&&e.mapInterface.setCenter(n,16)}return(t.selectedStartPoints||t.selectedEndPoints||!t.selectedIndex)&&e.mapInterface&&e.initialMapZoom&&e.initialMapCenter&&e.mapInterface.setCenter(e.initialMapCenter,e.initialMapZoom),{...e,selectedIndex:t.selectedIndex,stopsExpanded:!!t.selectedIndex&&t.selectedIndex>=2||e.stopsExpanded,selectedStartPoints:!!t.selectedStartPoints,selectedEndPoints:!!t.selectedEndPoints,mapMoved:!t.selectedStartPoints&&!t.selectedEndPoints&&!!t.selectedIndex,triggerScrolling:!0};case"HOVERING":return{...e,hoveredIndex:t.hoveredIndex,...void 0!==t.hoveredStartPoints?{hoveredStartPoints:t.hoveredStartPoints}:null,...void 0!==t.hoveredEndPoints?{hoveredEndPoints:t.hoveredEndPoints}:null};case"SET_HOVER_TIMEOUT":return{...e,hoverTimeout:t.hoverTimeout};case"SET_MAP_MOVED":return{...e,mapMoved:t.mapMoved};case"SET_INITIAL_MAP_ATTRIBUTES":return{...e,initialMapZoom:t.initialMapZoom,initialMapCenter:t.initialMapCenter,mapInterface:t.mapInterface};case"SET_MAP_OVERLAY_OPEN":return{...e,mapOverlayOpen:t.mapOverlayOpen,selectedIndex:null,selectedStartPoints:t.mapOverlayOpen,selectedEndPoints:!1,mapMoved:!1};case"SET_MOUSE_IN_DETAILS":return{...e,mouseInDetails:t.mouseInDetails};case"RESET_TRIGGER_SCROLLING":return{...e,triggerScrolling:!1};default:return e}},e6={simple_container:"ZnTXc Gi S b q",container:"gTIpi Gi S",left_container:"VSgWR j",right_container:"kDrzw _T",title:"BwuQs b MB",name:"tcNvg b MB",details:"KUMgc MB",subtitle:"vOZGN"},e5=e=>{if(e&&e.reviewSummary&&e.reviewSummary.rating)return 10*e.reviewSummary.rating},e9=e=>{if(e&&e.thumbnail&&e.thumbnail.photoSizes){var{photoSizes:t}=e.thumbnail;return t.map(e=>e&&e.width&&e.width>100?e.url:null).find(e=>e)}return null},e8=({item:e,showLabelInCarousel:t})=>{var{localize:r}=B();return n($,{title:t?i(a,{children:[n("div",{children:n(R,{id:"attractions.booking.section.mdtitinerary.day",args:{0:e.label},messages:"第 {0} 天"})}),n("div",{className:e6.title,children:e.name})]}):e.name&&`${e.index}. ${e.name}`||"",fallbackIcon:z,rating:e5(e?.locationDetails),numReviews:e?.locationDetails?.reviewSummary?.count||0,thumbnail:e9(e?.locationDetails),subtitle:n("div",{className:e6.subtitle,children:e1(e,r)})})},e7=({startEndPointInfo:e})=>i("div",{className:e6.container,children:[n("div",{className:e6.left_container,children:n(V,{size:20})}),i("div",{className:e6.right_container,children:[n("div",{className:e6.title,children:n("span",{dangerouslySetInnerHTML:{__html:e.title}})}),e.name&&n("div",{className:e6.name,children:e.name}),e.additionalInfo&&n("div",{className:e6.details,children:e.additionalInfo})]})]}),te=({item:e,showLabelInCarousel:t})=>e.itineraryItem?n(e8,{item:e.itineraryItem,showLabelInCarousel:t}):e.startEndPointInfo?n(e7,{startEndPointInfo:e.startEndPointInfo}):null,tt=({name:e})=>n("div",{className:e6.simple_container,children:e}),tn=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:i,pickupTypeEnum:a,showLabelInCarousel:r})=>{var{selectedIndex:o,selectedStartPoints:s,selectedEndPoints:l}=d(eb),{localize:m}=B(),{dispatch:p}=d(eE),u=c(()=>e0(t,i,a,!1,m),[t,i,a,m]),h=c(()=>e0(t,i,a,!0,m),[t,i,a,m]);if(!t)return null;var _=[];u&&_.push({startEndPointInfo:u}),_.push(...e.slice(1).map(e=>({itineraryItem:e}))),h&&_.push({startEndPointInfo:h});var b=o||0;(s||eq(b,t))&&(b=0),(l||eK(b,t))&&(b=_.length-1);var E=_.map(e=>n(ef,{item:e,showLabelInCarousel:r},e.itineraryItem?.index||e.startEndPointInfo?.title));return n("div",{className:"POEha _Q w",children:n(F,{items:E,itemSpacing:16,startIndex:b,onSlide:e=>p({type:"SET_SELECTED_INDEX",selectedIndex:(u&&e>0||e>=0)&&(h&&e<_.length-1||e<_.length)?e:null,selectedStartPoints:!!u&&0===e,selectedEndPoints:!!h&&e===_.length-1})})})},ti={map_pin_number:"HyRvV b f _Q j u",active:"kAvZk"},ta=(e,t,n,i,a)=>{if(e<0){var r=n[-e-1];if(("START"===r.startEndPointTypeEnum||"START_AND_END"===r.startEndPointTypeEnum)&&i||("END"===r.startEndPointTypeEnum||"START_AND_END"===r.startEndPointTypeEnum)&&a)return!0}return e===t},tr=({index:e,label:t,name:a,latLng:r,startEndPoints:o,disableInteractions:s})=>{var{selectedIndex:c,hoveredIndex:m,mapOverlayOpen:p,mouseInDetails:u,selectedStartPoints:h,selectedEndPoints:_,hoveredStartPoints:b,hoveredEndPoints:E}=d(eb),{dispatch:y}=d(eE),g="MOBILE"===f(),I=v(),S=l(()=>{e&&y({type:"SET_SELECTED_INDEX",selectedIndex:e,selectedStartPoints:!g&&eq(e,o),selectedEndPoints:!g&&eK(e,o)}),I(ep.clickMapPin())},[y,g,e,o,I]),T=l(()=>{!g&&e&&(y({type:"HOVERING",hoveredIndex:e}),I(ep.hoverMapPin()))},[g,y,e,I]),P=l(()=>y({type:"HOVERING",hoveredIndex:null}),[y]),N=l(()=>{g&&!p&&(y({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:!0}),I(ep.clickMapRecenter()))},[y,g,p,I]);if(!r||!e)return null;var k=ta(e,c,o,h,_)&&g&&p,w=ta(e,m,o,b,E),D=w&&G.hovered?G.hovered:G.inactive;return i(W,{position:r,...s?{onClick:N}:{onClick:S,onMouseEnter:T,onMouseLeave:P,hovered:w,selected:k,animated:!0},children:[n("span",{style:{width:`${D.width}px`,height:`${D.height*G.inactive.width/G.inactive.height}px`,left:`-${D.anchor.x}px`,top:`-${D.anchor.y}px`,fontSize:`${D.anchor.x-2.5}px`,lineHeight:`${D.anchor.x-2.5}px`},className:x(ti.map_pin_number,(w||k)&&ti.active),children:e>0?t:n(V,{})}),!g&&a&&n(A,{direction:"top",offset:{x:0,y:-46},autoPan:!1,zIndexOffset:U.hoverPopup,disableInteraction:!0,visible:ta(e,m,o,!1,!1)&&!u,children:n(tt,{name:a})})]})},to=({startEndPoints:e,disableInteractions:t})=>{var{localize:i}=B(),r=new Map([["START",0],["END",0],["START_AND_END",0]]);return n(a,{children:e.map((a,o)=>{var{startEndPointTypeEnum:s,latitude:d,longitude:l}=a;if(s&&d&&l){var c=r.get(s)||0;return r.set(s,c+1),n(ey,{index:-o-1,latLng:d&&l?new w(d,l):null,name:eQ(s,c+1,i),startEndPoints:e,disableInteractions:t},a.name)}return null})})},ts=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,disableInteractions:s,showLabelInCarousel:l})=>{var c="MOBILE"===f(),{mapOverlayOpen:m,mapInterface:p}=d(eb);return i(a,{children:[e.map(e=>n(ey,{index:e.index,label:e.label,latLng:e.latLng,name:e.locationDetails?.name?e.locationDetails?.name:e.name,startEndPoints:t,disableInteractions:s},e.name||`filler${e.index}`)),n(eg,{itemsFormatted:e,startEndPoints:t,disableInteractions:s}),m&&n(ev,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,showLabelInCarousel:l}),!p&&n(C,{}),!c&&n("div",{className:eG.zoom_control,children:n(L,{})})]})},td=({onClose:e})=>n("div",{className:"KEtiu Pj PY Pw PK _Q Gi Z1 f F",children:n(X,{onClick:e})}),tl={icon:"vGuEB PO S4 Cj",recenter_button:"FYJYI q S4",recenter_button_wrapper:"fPYmD _Q f w l j",with_header:"ehJYc"},tc=()=>{var{mapMoved:e,initialMapZoom:t,initialMapCenter:a,mapInterface:r,mapOverlayOpen:o}=d(eb),s=v(),{dispatch:c}=d(eE),m=l(()=>{t&&a&&r&&(r.setCenter(a,t),c({type:"SET_MAP_MOVED",mapMoved:!1})),s(ep.clickMapRecenter())},[t,a,r,c,s]);return e&&n("div",{className:x(tl.recenter_button_wrapper,o&&tl.with_header),children:n("div",{className:x(tl.recenter_button),children:i(j,{legacyStyled:!0,variant:"standard",onClick:m,fullWidth:!0,children:[n("span",{className:tl.icon,children:n(Z,{})}),n(R,{id:"exp_recenter_itinerary",messages:"重新定位行程"})]})})})},tm={map_container:"zWBsh w _T o",fullscreen:"RKXMS"},tp=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,showLabelInCarousel:o,mapHeight:s,roundingMode:c,roundingSize:m="none",overflowHidden:p})=>{var u="MOBILE"===f(),{mapOverlayOpen:h}=d(eb),{dispatch:_}=d(eE),b=v(),E=l(()=>{var n=[];return(e.forEach(e=>e.latLng&&n.push(e.latLng)),t.forEach(e=>{e.latitude&&e.longitude&&n.push(new w(e.latitude,e.longitude))}),n.length>0)?D.fromArray(n):null},[e,t])(),y=l(e=>{_({type:"SET_INITIAL_MAP_ATTRIBUTES",initialMapZoom:e.map.getZoom(),initialMapCenter:e.map.getCenter(),mapInterface:e.map})},[_]),g=l(e=>{e.userGesture&&(_({type:"SET_MAP_MOVED",mapMoved:!0}),b(ep.clickMapDragAndZoom()))},[b,_]),I={initialBounds:E,onLoad:y,onCenterChange:g,onZoomChange:g};return h?n(k,{fullscreenAlways:!0,children:n("div",{className:x(tm.map_container,tm.fullscreen),"data-automation":"itineraryMap",children:i(M,{...I,children:[n(eT,{}),n(eS,{onClose:()=>_({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:!1})}),n(eI,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,disableInteractions:!1,showLabelInCarousel:o})]})})}):E&&n(O,{className:tm.map_container,style:s?{height:`${s}px`}:void 0,dataAttributes:{"data-automation":"itineraryMap"},size:m,mode:c,overflowHidden:p,children:i(M,{...I,disableGestures:u,scrollWheelZoom:!1,onClick:()=>{_({type:"SET_MAP_OVERLAY_OPEN",mapOverlayOpen:u}),b(ep.clickMapOpen())},children:[!u&&n(eT,{}),n(eI,{itemsFormatted:e,startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,disableInteractions:u,showLabelInCarousel:o})]})})},tu={itineraryItemWrapper:"f",dottedLine:"nrvnw Z1",sidebar:"uFADE",content:"BnVmm w Pr _c"},th=({icon:e,content:t,showDottedLine:a})=>i("li",{className:tu.itineraryItemWrapper,children:[n("div",{className:x(tu.sidebar,a&&tu.dottedLine),children:e}),n("div",{className:tu.content,children:t})]}),t_={iconWrapper:"OeBIg f j u Rb",primary:"FXyap",secondary:"OgfiT",pin:"sEZQz"},tb=({variant:e,number:t})=>n("span",{className:x(t_.iconWrapper,{[t_.primary]:"primary"===e,[t_.secondary]:"secondary"===e}),children:t?n("span",{children:t}):n("span",{className:t_.pin,children:n(V,{})})}),tE={responsive_container:"JnVKK _Z w o",empty:"SBrBw",img_container:"aiTDg t s l _U f j u",portrait:"qqJYw"},tf={overall_container:"ZurqW Fl e",details_wrapper:"vTRLw e Fl",photo_container:"rRYnh w",right_container:"kxUdc e",centering:"j",description_container:"qevUW",button_container:"yyIPC",save_to_trip_cta:"hZhmH t _U Z1",see_more:"FEKfY",buttonContainer:"BwwOZ Wh _S"},tv=e=>e.photoSizes?{photoSizes:e.photoSizes.map(e=>({url:e?.url,width:e?.width,height:e?.height}))}:null,ty=({description:e})=>n("div",{className:tf.description_container,children:n(q,{variant:"extended",children:e||""})}),tg=({location:e})=>{var t=y(ep.clickStopDetailsPhoto());return!!e.url&&!!e.locationId&&!!e.name&&!!e.thumbnail&&i("div",{className:tf.photo_container,children:[n("div",{className:tf.save_to_trip_cta,children:n(Q,{object:{locationId:e.locationId,__typename:"LocationInformation"},children:(e,t)=>n(J,{iconShape:"heart",bookmarkSize:24,bookmarkStyle:"outline",roundedBackground:!0,active:t,onClick:e})})}),n("a",{href:e.url,target:"_blank",onClick:t,children:!!e.thumbnail.id&&!!e.thumbnail.photoSizes&&n(em,{imageSet:null,name:e.name,photo:tv(e.thumbnail)})})]})},tI=({name:e,dataAttributes:t,href:i,target:a,onClick:r})=>n("div",{className:tf.button_container,children:n(j,{variant:"secondary",fullWidth:!0,dataAttributes:t,href:i,target:a,onClick:r,size:"small",children:n(R,{id:"more_about_geo",args:{sGeo:e},messages:"关于{sGeo}的更多信息"})})}),tS=({location:e,description:t,alwaysExpanded:r,selected:o,index:s})=>{var{triggerScrolling:c}=d(eb),{localize:m}=B(),p=v(),_=y(ep.clickStopDetailsPoiLink()),[b,f]=u(r),g=null,I=e&&e.thumbnail&&e.thumbnail.photoSizes;I&&t?g=n(H,{id:"exp_see_details_and_photo",messages:"查看详情和照片"}):I?g=m.string("查看照片","exp_see_photo"):t&&(g=m.string("查看详情","common_see_details")),h(()=>{c&&!r&&f(o)},[r,o,c]);var{dispatch:S}=d(eE),T=l(e=>{f(!b),p(ep.clickStopSeeDetails()),b&&(e.stopPropagation(),S({type:"SET_SELECTED_INDEX",selectedIndex:null}))},[b,f,S,p]),P=`itineraryItemDetail_${s}`;return g&&i("div",{className:tf.overall_container,children:[b&&(e?i(a,{children:[e?.reviewSummary?.count!=null&&e?.reviewSummary?.count>0&&e?.reviewSummary?.rating!=null&&n(K,{numReviews:e.reviewSummary.count,rating:e.reviewSummary.rating}),i("div",{className:tf.details_wrapper,"data-automation":`${P}`,children:[n(tg,{location:e}),e.url&&e.name&&(t?i("div",{className:tf.right_container,children:[t&&n(ty,{description:t}),n(tI,{name:e.name,href:e.url,target:"_blank",dataAttributes:{"data-automation":`${P}_moreDetailLink`},onClick:_})]}):n("div",{className:x(tf.right_container,tf.centering),children:n(tI,{name:e.name,href:e.url,target:"_blank",dataAttributes:{"data-automation":`${P}_moreDetailLink`},onClick:_})}))]})]}):n(ty,{description:t})),n("button",{onClick:T,type:"button",className:tf.buttonContainer,children:b?r||n(E,{elementType:"span",variant:"button-02",children:n("span",{className:tf.see_more,"data-automation":`${P}_seeLess`,children:n(R,{id:"attractions.merchandising.see-less",messages:"收起"})})}):n(E,{elementType:"span",variant:"button-02",children:n("span",{className:tf.see_more,"data-automation":`${P}_seeMore`,children:g})})})]})},tT={displayName:"xZDme",duration:"PhXEH",details:"mBrgO w _S _T Wh",pass_bys:"cDvlW",pass_by_spacer:"Me",pass_by_title:"MHOEe Po",pass_by_item:"YnXYS",no_details:"WCCeD"},tP=e=>e.index<1,tN=({productItineraryItem:e,expanded:t,hideDetails:r})=>{var o="MOBILE"===f(),{hoverTimeout:s,selectedIndex:c}=d(eb),{dispatch:m}=d(eE),{localize:p}=B(),u=l(()=>{m({type:"SET_SELECTED_INDEX",selectedIndex:e.index})},[m,e.index]),h=l(()=>{o||(s&&clearTimeout(s),m({type:"SET_HOVER_TIMEOUT",hoverTimeout:setTimeout(()=>m({type:"HOVERING",hoveredIndex:e.index,hoveredStartPoints:!1,hoveredEndPoints:!1}),300)}))},[o,s,m,e.index]),_=l(()=>{o||(s&&clearTimeout(s),m({type:"SET_HOVER_TIMEOUT",hoverTimeout:null}),m({type:"HOVERING",hoveredIndex:null}))},[o,s,m]);return i(a,{children:[i("button",{className:tT.details,onClick:u,onMouseEnter:h,onMouseLeave:_,type:"button",children:[e.displayName&&n(E,{elementType:"div",variant:"title-05",children:n("span",{className:tT.displayName,children:e.displayName})}),n(E,{elementType:"div",variant:"body-01",children:n("span",{className:tT.duration,children:`${e1(e,p)} ${e.durationInMinutes&&e.admissionInclusionTypeEnum&&("YES"===e.admissionInclusionTypeEnum||"NO"===e.admissionInclusionTypeEnum)?"-":""} ${e4(e,p)}`})})]}),r?null:n(ek,{location:e.locationDetails,description:e.description,alwaysExpanded:t,selected:e.index===c,index:e.index})]})},tx=({productItineraryItem:e,useNumberIcon:t})=>tP(e)?null:n(ex,{variant:"secondary",number:t?e.index:void 0}),tk=e=>{var{productItineraryItem:t,stickyHeaderOffset:a}=e,r=_(null),{selectedIndex:o,triggerScrolling:s}=d(eb),{dispatch:l}=d(eE),c="MOBILE"===f();h(()=>{!c&&o===t.index&&r&&r.current&&s&&(l({type:"RESET_TRIGGER_SCROLLING"}),setTimeout(()=>Y(r,a),300))},[l,s,t.index,c,o,r,a]);var m=tP(t);return i("div",{"data-automation":`itineraryItem_${t.index}`,ref:r,className:e.hideDetails?tT.no_details:void 0,children:[!m&&n(tN,{...e}),!e.hideDetails&&t.passedBys&&t.passedBys.length>0&&i("div",{className:x(tT.pass_bys,!m&&tT.pass_by_spacer),children:[n("div",{className:tT.pass_by_title,children:n(E,{elementType:"div",variant:"title-05",children:n(R,{id:"exp_pass_by",messages:"途经"})})}),t.passedBys.filter(Boolean).map(e=>n("div",{className:tT.pass_by_item,children:n(E,{elementType:"span",variant:"supporting-01",children:e})},e))]})]})},tw={details:"Ci",cta:"WfkjV _S Ci Wh"},tA=({address:e,instruction:t})=>{var a=y(ep.clickStartSeeDetails());return n(en,{numLinesToShow:0,collapsible:!0,ctaNewline:!0,cta:n("button",{className:tw.cta,onClick:a,type:"button",children:n(E,{elementType:"span",variant:"button-02",children:n(R,{id:"exp_see_address_and_details",messages:"查看地址和其他详情"})})}),ctaCollapse:n("button",{className:tw.cta,type:"button",children:n(E,{elementType:"span",variant:"button-02",children:n(R,{id:"attractions.merchandising.see-less",messages:"收起"})})}),children:i(E,{elementType:"span",variant:"body-01",children:[n("div",{className:tw.details,children:e}),t&&n("div",{className:tw.details,children:t})]})})},tD={title:"YyHqh",name:"eZTXP",details:"XfpGC",itineraryPointCard:"AmKEE Wh _R"},tM=({hideAddress:e,isEndPoint:t,endsAtStartPoint:i,address:a,instruction:r})=>e||t&&i?null:a?n(eA,{address:a,instruction:r}):n(e_,{}),tO=e=>{var{hoverTimeout:t,selectedStartPoints:r,selectedEndPoints:o,triggerScrolling:s}=d(eb),{dispatch:m}=d(eE),{localize:p}=B(),u=_(null),b="MOBILE"===f(),v=l(()=>{b||m({type:"SET_SELECTED_INDEX",selectedIndex:null,selectedStartPoints:!e.isEndPoint,selectedEndPoints:e.isEndPoint})},[b,m,e.isEndPoint]),y=l(()=>{b||(t&&clearTimeout(t),m({type:"SET_HOVER_TIMEOUT",hoverTimeout:setTimeout(()=>m({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!e.isEndPoint,hoveredEndPoints:e.isEndPoint}),300)}))},[b,t,m,e.isEndPoint]),g=l(()=>{b||(t&&clearTimeout(t),m({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}))},[b,t,m]);h(()=>{!b&&(r&&!e.isEndPoint||o&&e.isEndPoint)&&s&&(m({type:"RESET_TRIGGER_SCROLLING"}),setTimeout(()=>{u&&u.current&&Y(u,e.stickyHeaderOffset)},300))},[s,m,r,o,e.stickyHeaderOffset,b,u,e.isEndPoint]);var I=c(()=>e0(e.startEndPoints,e.endsAtStartPoint,e.pickupTypeEnum,e.isEndPoint,p),[e.startEndPoints,e.endsAtStartPoint,e.pickupTypeEnum,e.isEndPoint,p]);if(!I)return null;var{title:S,name:T,additionalInfo:P,address:N,instruction:x}=I;return i(a,{children:[i("button",{ref:u,onClick:v,onMouseEnter:y,onMouseLeave:g,"data-automation":`itenerary${e.isEndPoint?"End":"Start"}Point`,type:"button",className:tD.itineraryPointCard,children:[n("div",{className:tD.title,children:n(E,{elementType:"span",variant:"title-05",children:n("span",{dangerouslySetInnerHTML:{__html:S}})})}),T&&n("div",{className:tD.name,children:n(E,{elementType:"span",variant:"body-01",children:T})}),P&&n("div",{className:tD.details,children:n(E,{elementType:"span",variant:"supporting-01",children:P})})]}),n(tM,{hideAddress:e.hideAddress,isEndPoint:e.isEndPoint,endsAtStartPoint:e.endsAtStartPoint,address:N,instruction:x})]})},tC={see_more_stops:"KmkuE _S Pc PN Pp PA Wh"},tL=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,showStartPoint:o,showEndPoint:s,useNumberIcon:c,maxUncollapsedItems:m,stickyHeaderOffset:p})=>{var{stopsExpanded:u,mapOverlayOpen:h}=d(eb),{dispatch:_}=d(eE),b=v(),f=e.length<=2,y=l(()=>{_({type:"SET_STOPS_EXPANDED",stopsExpanded:!0}),b(ep.clickSeeMoreStops())},[_,b]);return!h&&i("div",{onMouseEnter:()=>_({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!0}),onMouseLeave:()=>_({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!1}),children:[i("ul",{children:[o&&t&&n(eN,{icon:n(ex,{variant:"primary"}),content:n(eD,{startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,isEndPoint:!1,stickyHeaderOffset:p}),showDottedLine:!0}),e.map((e,t)=>0===t&&e.passedBys.length<1?null:(u||t<m)&&n(eN,{icon:n(tx,{productItineraryItem:e,useNumberIcon:c}),content:n(ew,{productItineraryItem:e,expanded:f,useNumberIcon:c,stickyHeaderOffset:p}),showDottedLine:!0},e.name?`${e.name}_${t}`:`filler_${t}`)),s&&t&&eJ(t,a)&&(u||e.length<m)&&n(eN,{icon:n(ex,{variant:"primary"}),content:n(eD,{startEndPoints:t,endsAtStartPoint:a,pickupTypeEnum:r,isEndPoint:!0,stickyHeaderOffset:p}),showDottedLine:!1})]}),!u&&e.length>m&&n("button",{className:tC.see_more_stops,"data-automation":"itineraryMoreStops",onClick:y,type:"button",children:n(E,{elementType:"span",variant:"button-01",children:n(R,{id:"exp_see_num_more_stops",args:{0:e.length-m},messages:"查看 {0, plural, other{# 个其他站点}}"})})})]})},tR={__key:0xf38c84aa858a,id:"f38c84aa858ae855",loc:{},definitions:[]},tB=({productItinerary:e,customTopOffset:t})=>{var a="MOBILE"===f(),r=a?3:11,[{data:o}]=P({query:tR,variables:{locationIds:e.productItineraryItems.filter(e=>!!e.taLocationId).map(e=>e.taLocationId)}}),s=eX(e.productItineraryItems,o?.locations),d={itemsFormatted:s,stopsExpanded:s.length<=r,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1},[l,m]=b(e3,d);h(()=>{m({type:"SET_SELECTED_INDEX",selectedIndex:null}),m({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}),m({type:"SET_HOVER_TIMEOUT",hoverTimeout:null})},[a]),h(()=>{m({type:"INIT_DATA",itemsFormatted:eX(e.productItineraryItems,o?.locations)})},[e,o]);var p=N(),u=c(()=>({dispatch:m}),[m]);return n(eb.Provider,{value:l,children:n(eE.Provider,{value:u,children:i("div",{className:"MLtLP f _Y",children:[n("div",{className:"ckgbG",children:n(eM,{startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,itemsFormatted:s,maxUncollapsedItems:r,stickyHeaderOffset:t,showStartPoint:!0,showEndPoint:!0,useNumberIcon:!0})}),n("div",{className:"KiSLa w t",style:t?{top:t}:{top:eW(p)},children:n(eP,{itemsFormatted:s,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!1,roundingSize:"large",roundingMode:"all",overflowHidden:!0})})]})})})},tH={header:"PyPoq _X Cj",spacer:"hNniT",outerWrapper:"ZAnYV f",leftContainer:"Zqbxw f e _T",rightContainer:"PkIlt w f e H",icon:"edXJj S5 H4"},tF=({day:e,startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,locations:s,maxUncollapsedItems:d})=>{var{localize:l}=B();return i("div",{children:[e.title&&n(E,{elementType:"div",variant:"title-05",children:n("div",{className:tH.header,children:e.title})}),n(eM,{itemsFormatted:eZ([e],s),startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,showStartPoint:1===e.groupNumber,showEndPoint:!1,useNumberIcon:!1,maxUncollapsedItems:d}),i("div",{className:x(tH.outerWrapper,tH.spacer),children:[n("div",{className:tH.leftContainer,children:n("span",{className:tH.icon,children:n(er,{})})}),n("div",{className:tH.rightContainer,children:e.foodAndDrinks&&e.foodAndDrinks.length&&i(a,{children:[n(E,{elementType:"div",variant:"title-05",children:n(R,{id:"attractions.booking.section.mdtitinerary.mealsincluded",messages:"含餐："})}),e.foodAndDrinks.map(t=>n("div",{children:i(E,{elementType:"span",variant:"supporting-02",children:[e2(t.inclusion,l),t.inclusion.description&&`:${t.inclusion.description}`]})},`foodAndDrinks_${String(e.groupNumber)}`))]})||n(E,{elementType:"span",variant:"supporting-02",children:n(R,{id:"attractions.booking.section.mdtitinerary.nomealsincluded",messages:"此日不提供餐饮。"})})})]}),i("div",{className:tH.outerWrapper,children:[n("div",{className:tH.leftContainer,children:n("span",{className:tH.icon,children:n(ea,{})})}),n("div",{className:tH.rightContainer,children:e.accommodations&&e.accommodations.length&&i(a,{children:[n(E,{elementType:"div",variant:"title-05",children:n(R,{id:"attractions.booking.section.mdtitinerary.accommodationincluded",messages:"含住宿："})}),e.accommodations.map(t=>n("div",{children:t.description&&n(E,{elementType:"span",variant:"supporting-02",children:t.description})},`accommodation_${String(e.groupNumber)}`))]})||n(E,{elementType:"span",variant:"supporting-02",children:n(R,{id:"attractions.booking.section.mdtitinerary.noaccommodationincluded",messages:"此日不提供住宿。"})})})]})]})},tz={overview_container:"w",overview:"yzhOU _A",title:"QFnBs _X",see_more_container:"LecDe f e u Wh",see_more:"IEwtA _S"},tV=({mdtProductItinerary:e})=>{var[t,a]=u(!1);return i("div",{className:tz.overview_container,children:[n("ol",{className:tz.overview,children:e.mdtProductItineraryDays.map((e,i)=>(t||i<6)&&n("li",{className:tz.title,children:e.title},e.title))}),!t&&e.mdtProductItineraryDays.length>6&&n("button",{className:tz.see_more_container,onClick:()=>a(!0),type:"button",children:n("div",{className:tz.see_more,children:n(R,{id:"attractions.booking.section.mdtitinerary.seemore",messages:"查看更多"})})})]})},t$={tabHeader:"IrORL w",title:"MXbLh c _X",subTitle:"owFYJ _X n",active:"Iyfhj",tabContent:"szGgM o W"},tG=e=>n(eo,{onClick:e.onClick,elementType:"div",className:t$.tabHeader,active:e.active,children:i("div",{className:x(t$.tabContent,e.title||e.subTitle||e.info),children:[n("div",{className:x(t$.title,e.active&&t$.active),children:n(E,{elementType:"span",variant:"title-05",children:e.title})}),n("div",{className:x(t$.subTitle,e.active&&t$.active),children:i(E,{elementType:"span",variant:"supporting-02",children:[e.subTitle&&n("div",{children:n(ei,{text:e.subTitle,max:e.maxSubTitleLength})}),e.info&&n("div",{children:n(ei,{text:e.info,max:e.maxSubTitleLength})})]})})]})}),tW={tabHeader:"cukGp v",tabContent:"rWxtf v",twoColumns:"nsKzn v",arrowWrapper:"ybWjX _S Gi R2 _Q c Z1 _O",leftArrow:"xDGQg",rightArrow:"_U",arrow:"vmwWJ _Q Cj S6 X0 b"},tU=e=>{var t="DESKTOP"===f(),[r,o]=u(0),s=_(e.tabs[0].onActivation);h(()=>{s.current()},[]);var[d,l]=u(0),c=Math.ceil(e.tabs.length/e.maxVisibleTabs),m=d>0&&d===c-1?e.tabs.length-e.maxVisibleTabs:d*e.maxVisibleTabs;return i(a,{children:[!t&&n("div",{className:tW.tabContent,children:e.tabs[r].rightContent}),i(es,{className:tW.tabHeader,children:[d>0&&n("div",{className:x(tW.arrowWrapper,tW.leftArrow),children:n("button",{type:"button",className:tW.arrow,onClick:()=>l(d-1),children:n(ed,{})})}),e.tabs.slice(m,e.tabs.length).map((e,t)=>n(eR,{title:e.title,subTitle:e.subTitle,info:e.info,maxSubTitleLength:e.maxSubTitleLength,active:r===m+t,onClick:()=>{o(m+t),e.onActivation()}},`tabHeader_${String(e.id)}`)),e.tabs.length>e.maxVisibleTabs&&d<c-1&&n("div",{className:x(tW.arrowWrapper,tW.rightArrow),children:n("button",{className:tW.arrow,onClick:()=>l(d+1),type:"button",children:n(el,{})})})]}),i("div",{className:x(tW.tabContent,t&&e.tabs[r].leftContent&&tW.twoColumns),children:[e.tabs[r].leftContent,t&&e.tabs[r].rightContent]})]})},tX=({mdtProductItinerary:e})=>{var t,i="MOBILE"===f(),a="TABLET"===f(),r="DESKTOP"===f(),{localize:o}=B(),s=c(()=>e.mdtProductItineraryDays.map(e=>e.productItineraryItems).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.taLocationId).map(e=>e.taLocationId),[e]),[{data:d}]=P({query:tR,variables:{locationIds:s}}),l=eZ(e.mdtProductItineraryDays,d?.locations),[m,p]=b(e3,{itemsFormatted:[],stopsExpanded:!1,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1});h(()=>{p({type:"SET_SELECTED_INDEX",selectedIndex:null}),p({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}),p({type:"SET_HOVER_TIMEOUT",hoverTimeout:null})},[i]);var u=i?3:11,_=c(()=>{var t=e.mdtProductItineraryDays.map(t=>({id:t.groupNumber,title:o.string("第 {0} 天","attractions.booking.section.mdtitinerary.day",{0:String(t.groupNumber)}),subTitle:t.title,maxSubTitleLength:r?35:25,leftContent:n(eC,{day:t,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,locations:d?.locations,maxUncollapsedItems:u},`itineraryDay_${String(t.groupNumber)}`),rightContent:n(eP,{itemsFormatted:eZ([t],d?.locations),startEndPoints:1===t.groupNumber?e.startEndPoints:[],endsAtStartPoint:1===t.groupNumber&&e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!0},`itineraryMap_${String(t.groupNumber)}`),onActivation:()=>{p({type:"INIT_DATA",itemsFormatted:eZ([t],d?.locations)}),p({type:"SET_STOPS_EXPANDED",stopsExpanded:eZ([t],d?.locations).length<=u}),p({type:"SET_SELECTED_INDEX",selectedIndex:null})}}));return t.splice(0,0,{id:0,title:o.string("概览","attractions.booking.section.mdtitinerary.overview"),subTitle:o.string("完整地图","attractions.booking.section.mdtitinerary.fullmap"),info:o.string("{0} 个站点","attractions.booking.section.mdtitinerary.stops",{0:l.length}),maxSubTitleLength:r?35:25,leftContent:!r&&n(eL,{mdtProductItinerary:e}),rightContent:n(eP,{itemsFormatted:l,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!0}),onActivation:()=>{p({type:"INIT_DATA",itemsFormatted:l}),p({type:"SET_SELECTED_INDEX",selectedIndex:null})}}),t},[e,o,l,r,d,u]);t=r?7:a?6:_.length;var E=c(()=>({dispatch:p}),[p]);return n(eb.Provider,{value:m,children:n(eE.Provider,{value:E,children:n(eB,{tabs:_,maxVisibleTabs:t})})})},tZ={see_more_stops:"nbzzE u G_ _S Q3",plus_icon:"GoSUX j u Rb z"},tj=({itemsFormatted:e,startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,showStartPoint:s,showEndPoint:m,useNumberIcon:p,maxUncollapsedItems:u,stickyHeaderOffset:h})=>{var{localize:_}=B(),{stopsExpanded:b,mapOverlayOpen:f}=d(eb),{dispatch:y}=d(eE),g=v(),I=e.length<=2,S=l(()=>{y({type:"SET_STOPS_EXPANDED",stopsExpanded:!0}),g(ep.clickSeeMoreStops())},[y,g]),T=c(()=>e0(t||[],r,o,!1,_),[t,r,o,_]);return i(a,{children:[T?.address?n(E,{variant:"body-01",marginBottom:"spacing-05",children:T.address}):null,!f&&i("div",{onMouseEnter:()=>y({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!0}),onMouseLeave:()=>y({type:"SET_MOUSE_IN_DETAILS",mouseInDetails:!1}),children:[i("ul",{children:[s&&t&&n(eN,{icon:n(ex,{variant:"primary"}),content:n(eD,{startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,isEndPoint:!1,stickyHeaderOffset:h,hideAddress:!0}),showDottedLine:!0}),e.map((e,t)=>0===t&&e.passedBys.length<1?null:(b||t<u)&&n(eN,{icon:n(tx,{productItineraryItem:e,useNumberIcon:p}),content:n(ew,{productItineraryItem:e,expanded:I,useNumberIcon:p,stickyHeaderOffset:h,hideDetails:!0}),showDottedLine:!0},e.name?`${e.name}_${t}`:`filler_${t}`)),m&&t&&eJ(t,r)&&(b||e.length<u)&&n(eN,{icon:n(ex,{variant:"primary"}),content:n(eD,{startEndPoints:t,endsAtStartPoint:r,pickupTypeEnum:o,isEndPoint:!0,stickyHeaderOffset:h,hideAddress:!0}),showDottedLine:!1})]}),!b&&e.length>u&&i("button",{type:"button",className:tZ.see_more_stops,"data-automation":"itineraryMoreStops",onClick:S,children:[n("span",{className:tZ.plus_icon,children:n(ec,{size:16})}),n(E,{elementType:"span",variant:"body-01",children:n(R,{id:"exp_see_num_more_stops_short",args:{0:e.length-u},messages:"{0, plural, other {# 站或以上}}"})})]})]})]})},tY=({productItinerary:e})=>{var t="MOBILE"===f(),[{data:a}]=P({query:tR,variables:{locationIds:e.productItineraryItems.filter(e=>!!e.taLocationId).map(e=>e.taLocationId)}}),r=eX(e.productItineraryItems,a?.locations),o={itemsFormatted:r,stopsExpanded:r.length<=6,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1},[s,d]=b(e3,o);h(()=>{d({type:"SET_SELECTED_INDEX",selectedIndex:null}),d({type:"HOVERING",hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1}),d({type:"SET_HOVER_TIMEOUT",hoverTimeout:null})},[t]),h(()=>{d({type:"INIT_DATA",itemsFormatted:eX(e.productItineraryItems,a?.locations)})},[e,a]);var l=c(()=>({dispatch:d}),[d]);return n(eb.Provider,{value:s,children:n(eE.Provider,{value:l,children:i("div",{className:"f _Y Fc",children:[n("div",{className:"WSagB",children:n(eF,{startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,itemsFormatted:r,maxUncollapsedItems:6,showStartPoint:!0,showEndPoint:!0,useNumberIcon:!0})}),n("div",{className:"fACUc w t Px",children:n(eP,{itemsFormatted:r,startEndPoints:e.startEndPoints,endsAtStartPoint:e.endsAtStartPoint,pickupTypeEnum:e.pickupTypeEnum,showLabelInCarousel:!1,mapHeight:250,roundingSize:"large",roundingMode:"all",overflowHidden:!0})})]})})})};return[()=>{ep=r({clickStartSeeDetails:()=>({module:ez,action:"click_start_see_details"}),clickStartSeeImportantInformation:()=>({module:ez,action:"click_start_see_important_information"}),clickStopSeeDetails:()=>({module:ez,action:"click_stop_see_details"}),clickStopDetailsPoiLink:()=>({module:ez,action:"click_stop_details_poi_link"}),clickStopDetailsPhoto:()=>({module:ez,action:"click_stop_details_photo"}),clickSeeMoreStops:()=>({module:ez,action:"click_see_more_stops"}),hoverMapPin:()=>({module:ez,action:"hover_map_pin"}),clickMapPin:()=>({module:ez,action:"click_map_pin"}),clickMapDragAndZoom:()=>({module:ez,action:"click_map_drag_and_zoom"}),clickMapRecenter:()=>({module:ez,action:"click_map_recenter"}),clickMapOpen:()=>({module:ez,action:"click_map_open"})}),eu=r({onSeeImportantInformationClick:()=>{},preferSeeImportantCallback:!1,importantInformationText:null}),eh=o(eu),e_=s(e$),eb=o({itemsFormatted:[],stopsExpanded:!1,selectedIndex:null,hoveredIndex:null,hoveredStartPoints:!1,hoveredEndPoints:!1,selectedStartPoints:!1,selectedEndPoints:!1,hoverTimeout:null,mapInterface:null,mapMoved:!1,initialMapZoom:null,initialMapCenter:null,mapOverlayOpen:!1,mouseInDetails:!1,triggerScrolling:!1}),eE=o({dispatch:()=>{}}),ef=s(te),ev=s(tn),ey=s(tr),eg=s(to),eI=s(ts),eS=s(td),eT=s(tc),eP=s(tp),eN=s(th),ex=s(tb),em=class e extends m{static getSrcSetFromImageSet(e){if(e&&e.small.width&&e.medium.width&&e.large.width)return`${e.small.url} ${e.small.width}w, ${e.medium.url} ${e.medium.width}w, ${e.large.url} ${e.large.width}w`}static getSrcSetFromPhoto(e){if(e.photoSizes)return e.photoSizes.filter(e=>e?.url&&e?.width).map(e=>e&&e.url&&e.width&&`${e.url} ${e.width}w`).join(",")}static getBestSrcFromPhoto(e){if(!e.photoSizes||!e.photoSizes.length)return"";var t=e.photoSizes.slice().sort((e,t)=>(t&&t.width||0)-(e&&e.width||0));return t.length>0&&t[0]?.url||""}componentDidMount(){var{clientWidth:e,clientHeight:t}=this.element.current,n=this.props.photo&&this.props.photo.photoSizes,i=n&&n.length&&n.length-1||0,a=e/t<(n?i&&(n[i]&&n[i].width||0)/(n[i]?.height||1):this.props.imageSet&&this.props.imageSet.large.width/this.props.imageSet.large.height||0)?tE.portrait:"";this.setState({imgClass:a})}render(){var t=this.props.photo?e.getSrcSetFromPhoto(this.props.photo):e.getSrcSetFromImageSet(this.props.imageSet),a=this.props.photo?e.getBestSrcFromPhoto(this.props.photo):this.props.imageSet?.large.url||"";return n("div",{ref:this.element,className:x(tE.responsive_container,{[tE.empty]:!this.props.imageSet}),children:a&&i(O,{className:tE.img_container,size:"large",overflowHidden:!0,children:[n(ee,{alt:this.props.name,className:this.state.imgClass,src:a,srcSet:t,loadingElement:e=>i("div",{ref:e,children:[n(et,{fillParent:!0}),n("img",{alt:this.props.name,"data-url":t})]})}),n("source",{srcSet:t})]})})}constructor(e){var t,n;super(e),n=void 0,(t="element")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.element=p(),this.state={imgClass:""}}},ek=s(tS),ew=s(tk),eA=s(tA),eD=s(tO),eM=s(tL),eO=s(tB),eC=s(tF),eL=s(tV),eR=tG,eB=tU,eH=s(tX),eF=s(tj),e({FlyoutItinerary:s(tY),Itinerary:eO,MDTItinerary:eH,SeeImportantInformationContextProvider:eh.Provider})},[e=>(n=e.jsx,i=e.jsxs,a=e.Fragment),e=>r=e.readOnly,e=>(o=e.createContext,s=e.memo,d=e.useContext,l=e.useCallback,c=e.useMemo,m=e.Component,p=e.createRef,u=e.useState,h=e.useEffect,_=e.useRef,b=e.useReducer),e=>E=e.default,e=>f=e.useViewportCategory,e=>(v=e.useGARecorder,y=e.useGARecordCallback),e=>(g=e.IMPORTANT_INFORMATION,I=e.TAB_COMMERCE_NAV_OFFSET,S=e.STICKY_NAV_OFFSET),e=>T=e.getTabLocation,e=>P=e.useQuery,e=>N=e.useIsMounted,e=>x=e.default,e=>k=e.default,e=>(w=e.LatLng,A=e.Popup,D=e.LatLngBounds),e=>M=e.MapComponent,e=>O=e.RoundedContainer,e=>C=e.default,e=>L=e.default,e=>(R=e.default,B=e.useLocalize,H=e.UnsafeLocalize),e=>F=e.default,e=>z=e.default,e=>V=e.default,e=>$=e.default,e=>(G=e.StopImageSet,W=e.AttractionItineraryStopMarker),e=>U=e.default,e=>X=e.CloseButton,e=>Z=e.default,e=>j=e.default,e=>Y=e.scrollIntoViewIfNeededWithHeaderOffset,e=>q=e.default,e=>K=e.BubbleRatingWithReviewCount,e=>Q=e.QueriedTripFlowSelector,e=>J=e.BookmarkButton,e=>ee=e.LazyImage,e=>et=e.default,e=>(en=e.ReadMore,ei=e.Abbreviate),e=>ea=e.default,e=>er=e.default,e=>(eo=e.GroupingTab,es=e.GroupingTabs),e=>ed=e.default,e=>el=e.default,e=>ec=e.default]]},["21h32l","5vmpsm","o4yt4q","essqvy","ys6v1o","32pwc7","tl3yll","azylvk","mqwhqn","mb2nze","fkji80","7sf9ju","49c7br","5xqg72","fa3gob","ndszpi","us1vwl","7thqz4","38pxm6","s1ymgp","b1qg3y","ilfmgg","frb1r3","g6hkol","uzmmz7","v5ce81","jppfwt","juj8rz","livpad","bkeq24","9rb8bq","u5pild","76j3t0","u59av4","wgun1f","c5q3iu","o3mm96","k3un42","7nq86i","7a7jm3","2wld0u"]]);
